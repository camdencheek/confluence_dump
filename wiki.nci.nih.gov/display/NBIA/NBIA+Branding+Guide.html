Contents of this page
<ul>
  <li>
    <a href="#NBIABrandingGuide-BrandingNBIAClassic" rel="nofollow">
      Branding NBIA Classic
    </a>
    <ul>
      <li>
        <a href="#NBIABrandingGuide-BuildingaBrandedVersion" rel="nofollow">
          Building a Branded Version
        </a>
      </li>
      <li>
        <a href="#NBIABrandingGuide-XHTML/FaceletsBasics" rel="nofollow">
          XHTML/Facelets Basics
        </a>
        <ul>
          <li>
            <a href="#NBIABrandingGuide-Entities" rel="nofollow">
              Entities
            </a>
          </li>
        </ul>
      </li>
      <li>
        <a href="#NBIABrandingGuide-QuickLinksXHTML" rel="nofollow">
          Quick Links XHTML
        </a>
      </li>
      <li>
        <a href="#NBIABrandingGuide-OtherXHTML" rel="nofollow">
          Other XHTML
        </a>
      </li>
    </ul>
  </li>
  <li>
    <a href="#NBIABrandingGuide-BrandingtheNBIAClient" rel="nofollow">
      Branding the NBIA Client
    </a>
    <ul>
      <li>
        <a href="#NBIABrandingGuide-ExampleofBrandedProperties" rel="nofollow">
          Example of Branded Properties
        </a>
      </li>
    </ul>
  </li>
</ul>
<h1 id="NBIABrandingGuide-BrandingNBIAClassic">
  Branding NBIA Classic
</h1>
The
<a href="https://imaging.nci.nih.gov/" rel="nofollow">
  NBIA Classic
</a>
 application is currently in production, primarily to provide administrative tools. The
<a href="https://imaging.nci.nih.gov/nbia-search/" rel="nofollow">
  NBIA Client
</a>
 is the new search interface for NBIA and is also in production.To brand the NBIA Classic application, the developer will need to download the code from GitHub
<a href="https://github.com/CBIIT/national-biomedical-image-archive" rel="nofollow">
  https://github.com/CBIIT/national-biomedical-image-archive
</a>
 and build the application using the ant target build:all.  You will need to have the following required software:
<table>
  <colgroup>
    <col/>
    <col/>
  </colgroup>
  <tbody>
    <tr>
      <th>
        Required Software Name and Version
      </th>
      <th>
        Description
      </th>
    </tr>
    <tr>
      <td>
        <a href="http://www.oracle.com/technetwork/java/javase/downloads/jdk8-downloads-2133151.html" rel="nofollow">
          Java SE Development Kit 8
        </a>
        <a href="http://www.cancer.gov/policies/linking" rel="nofollow">
          <img alt="Exit Disclaimer logo" src="https://wiki.nci.nih.gov/download/attachments/embedded-page/wikicontent/Exit%20Disclaimer%20to%20Include/exit_small.png?api=v2">
        </a>
        Be sure to download the correct Java SDK for your operating environment. For example, for Linux AMD 64, you would download jdk-8u101-linux-x64.tar.gz and for Windows,  jdk-8u101-windows-x64.exe. You must also factor in if the system is 32 or 64-bit. A 32-bit system cannot install 64-bit software. It is recommended that you install 32-bit Java SDK in a Windows environment even if your system is 64-bit because generating CTP thumbnail image only works properly with the 32-bit JDK in Windows.
      </td>
      <td>
        The J2SE Development Kit (JDK) supports creating J2SE applications.
      </td>
    </tr>
    <tr>
      <td>
        Apache Ant 1.8.4
        <a href="http://archive.apache.org/dist/ant/binaries/" rel="nofollow">
          http://archive.apache.org/dist/ant/binaries/
        </a>
        <a href="http://www.cancer.gov/policies/linking" rel="nofollow">
          <img alt="Exit Disclaimer logo" src="https://wiki.nci.nih.gov/download/attachments/embedded-page/wikicontent/Exit%20Disclaimer%20to%20Include/exit_small.png?api=v2">
        </a>
      </td>
      <td>
        Apache Ant is a Java-based build tool.
      </td>
    </tr>
  </tbody>
</table>
Branding in NBIA is accomplished by editing and or replacing the objects in the branding folders found in /software/common/resources/branding. The nbia folder contained within is the default branding for NBIA. The subfolder called images contains the customizable images for the application; they include:
<table>
  <colgroup>
    <col/>
    <col/>
  </colgroup>
  <tbody>
    <tr>
      <th>
        Name
      </th>
      <th>
        Dimensions
      </th>
    </tr>
    <tr>
      <td>
        FNLfCR-LOGO.png
      </td>
      <td>
        200 x 39
      </td>
    </tr>
    <tr>
      <td>
        footer_usagov.gif
      </td>
      <td>
        127 x 31
      </td>
    </tr>
    <tr>
      <td>
        Logo-NCIA.jpg
      </td>
      <td>
        500 x  53
      </td>
    </tr>
    <tr>
      <td>
        nci-header.png
      </td>
      <td>
        300 x 38
      </td>
    </tr>
    <tr>
      <td>
        nci-link.png
      </td>
      <td>
        300 x 38
      </td>
    </tr>
    <tr>
      <td>
        NCI-logo-white.png
      </td>
      <td>
        54 x 32
      </td>
    </tr>
    <tr>
      <td>
        NCICBLOGO.gif
      </td>
      <td>
        126 x 43
      </td>
    </tr>
    <tr>
      <td>
        white-ncilogo.gif
      </td>
      <td>
        263 x 39
      </td>
    </tr>
    <tr>
      <td>
        white-nciurl.gif
      </td>
      <td>
        99 x 39
      </td>
    </tr>
    <tr>
      <td>
        white-nihtext.gif
      </td>
      <td>
        208 x 39
      </td>
    </tr>
  </tbody>
</table>
To use your own images, simply replace the image while keeping the same name as the original one in your new folder; the build will update it accordingly. At the base level of the folder are the XHTML/properties files that allow customization. Those files are listed in the following table.
<table>
  <colgroup>
    <col/>
    <col/>
  </colgroup>
  <tbody>
    <tr>
      <th>
        Name
      </th>
      <th>
        Purpose
      </th>
    </tr>
    <tr>
      <td>
        appFooter.xhtml
      </td>
      <td>
        The footer of the application
      </td>
    </tr>
    <tr>
      <td>
        appHeader.xhtml
      </td>
      <td>
        The header of the application
      </td>
    </tr>
    <tr>
      <td>
        branding.properties
      </td>
      <td>
        Contains the application name property
      </td>
    </tr>
    <tr>
      <td colspan="1">
        ccHeader.xhtml
      </td>
      <td colspan="1">
        Legacy file for cancer center logos, to be removed
      </td>
    </tr>
    <tr>
      <td colspan="1">
        footer.xhtml
      </td>
      <td colspan="1">
        Legacy file for footers, to me removed
      </td>
    </tr>
    <tr>
      <td colspan="1">
        legalRules.xhtml
      </td>
      <td colspan="1">
        Legal rules when signing up
      </td>
    </tr>
    <tr>
      <td colspan="1">
        mainLayout.xhtml
      </td>
      <td colspan="1">
        Layout with session timer
      </td>
    </tr>
    <tr>
      <td colspan="1">
        mainLayoutTemplate.xhtml
      </td>
      <td colspan="1">
        Overall layout of the application
      </td>
    </tr>
    <tr>
      <td colspan="1">
        mainLayoutWithoutSessionTimeout.xhtml
      </td>
      <td colspan="1">
        Layout without session timer
      </td>
    </tr>
    <tr>
      <td colspan="1">
        mainMenu.xhtml
      </td>
      <td colspan="1">
        Top menu bar
      </td>
    </tr>
    <tr>
      <td colspan="1">
        ncia_messages.properties
      </td>
      <td colspan="1">
        Various messages used in the application
      </td>
    </tr>
    <tr>
      <td colspan="1">
        nciHeader.xhtml
      </td>
      <td colspan="1">
        Application header
      </td>
    </tr>
    <tr>
      <td colspan="1">
        quickLinks.xhtml
      </td>
      <td colspan="1">
        External links
      </td>
    </tr>
    <tr>
      <td colspan="1">
        sessionExpired.jsp
      </td>
      <td colspan="1">
        Page shown when session expires
      </td>
    </tr>
    <tr>
      <td colspan="1">
        siteMap.xhtml
      </td>
      <td colspan="1">
        Site map at bottom of page
      </td>
    </tr>
    <tr>
      <td colspan="1">
        slideshow.css
      </td>
      <td colspan="1">
        CSS for the slideshow page
      </td>
    </tr>
    <tr>
      <td colspan="1">
        styleSheet.css
      </td>
      <td colspan="1">
        Main CSS for the application
      </td>
    </tr>
    <tr>
      <td colspan="1">
        subMenu.xhtml
      </td>
      <td colspan="1">
        Sub menus in the menu bar
      </td>
    </tr>
    <tr>
      <td colspan="1">
        welcome.xhtml
      </td>
      <td colspan="1">
        Main login page
      </td>
    </tr>
    <tr>
      <td colspan="1">
        welcomeText.xhtml
      </td>
      <td colspan="1">
        Legacy welcome page, to be removed
      </td>
    </tr>
  </tbody>
</table>
<h2 id="NBIABrandingGuide-BuildingaBrandedVersion">
  Building a Branded Version
</h2>
To create and build a branded version copy the example nbia folder to a new folder. As an example, assume the copied folder is &#34;ncia&#34; and you plan to make a version named &#34;NCIA&#34;. Copy and name the folder and edit accordingly. Note the ncia_messages.properties contains much of the applications textual information and branding.properties contains the application names. Once you have edited the files, edit the install.properties and the defaultAHP3.properties files in the /software/build directory. Specify the branding properties. An example for naming an application &#34;NCIA&#34; follows.
##############################################
### New Branding Properties ###
##############################################
branding.appname=NCIA
branding.folder=ncia
Once that is complete, execute the build:all ant target and the new war files in the directory (nbia-source-directory)/software/target/dist/exploded/nbia-wars/ will be properly branded. Replace the war files in tomcat\webapps with the branded ones, delete the nbia-api, ncia, and nbia-download and restart tomcat.For the JNLP Download Manager to work correctly, a Java signing certificate must be used to sign the jar files used by Download Manager. If you do not have a signing certificate you can pull the following jar files from the NBIA install files ncia.war: ncia.war\NBIADownloadManager.jar and the folder ncia.war\download-mgr-dependencies and replace the files in your generated ncia.war.
<h2 id="NBIABrandingGuide-XHTML/FaceletsBasics">
  XHTML/Facelets Basics
</h2>
For all of the XHTML files that can be specified through the branding process, they MUST start with:
&lt;ui:composition xmlns:ui=&#34;http://java.sun.com/jsf/facelets&#34;&gt;

and they MUST finish up with:
&lt;/ui:composition&gt;

Within the composition, almost any XHTML can be specified.
<h3 id="NBIABrandingGuide-Entities">
  Entities
</h3>
The one exception to watch out for are entities such as non-breaking spaces. Including these directly will cause the rendering of the page to fail, and users will see a big mess in their browser. In other words &amp;nbsp; will break rendering. Instead, the entity must be enclosed in a &#34;verbatim&#34; tag. Please note that another namespace is defined in the composition tag (in red below).
&lt;ui:composition xmlns:ui=&#34;http://java.sun.com/jsf/facelets&#34;
xmlns:f=&#34;http://java.sun.com/jsf/core&#34;&gt;
&lt;f:verbatim&gt;&amp;amp;nbsp;&lt;/f:verbatim&gt;
&lt;/ui:composition&gt;
<h2 id="NBIABrandingGuide-QuickLinksXHTML">
  Quick Links XHTML
</h2>
The Quick Links XHTML is imported into the scope of an XHTML table. Any XHTML specified here should be wrapped in a &lt;tr&gt; and at least one &lt;td&gt; element. For an example see:
<a href="https://github.com/CBIIT/national-biomedical-image-archive/blob/master/software/common/resources/branding/niams/quickLinks.xhtml" rel="nofollow">
  https://github.com/CBIIT/national-biomedical-image-archive/blob/master/software/common/resources/branding/niams/quickLinks.xhtml
</a>
<h2 id="NBIABrandingGuide-OtherXHTML">
  Other XHTML
</h2>
There are no restrictions on XHTML for the welcome title/text or the footer.
<h1 id="NBIABrandingGuide-BrandingtheNBIAClient">
  Branding the NBIA Client
</h1>
The
<a href="https://imaging.nci.nih.gov/nbia-search/" rel="nofollow">
  NBIA Client
</a>
is the new search interface for NBIA. Both the NBIA Client and the
<a href="https://imaging.nci.nih.gov" rel="nofollow">
  NBIA Classic
</a>
interfaces are currently in production.Branding files for the NBIA Client are in directories within the assets/brand directory. Each subdirectory represents one brand. Which brand directory to be used is determined by the content of the text file assets/brand/currentBrand, it should contain the name of a directory within assets/brand.If there is no assets/brand/currentBrand file, or its contents don&#39;t point to a valid directory, the default brand &#34;nbia&#34; will be used.If there are any files missing from the brand directory named in assets/brand/currentBrand, the file from the default directory will be used.If you only want to change one aspect of a brand, only include that file. The default directory versions will be used for the others.You can brand the following files.
<table>
  <colgroup>
    <col/>
    <col/>
  </colgroup>
  <tbody>
    <tr>
      <th>
        Name
      </th>
      <th>
        Purpose
      </th>
    </tr>
    <tr>
      <td>
        logo.png
      </td>
      <td>
        A logo (41 pixels high)
      </td>
    </tr>
    <tr>
      <td>
        footer.html
      </td>
      <td>
        A snippet of HTML that is at the bottom. If included, %VERSION% will be replaced with the client version number (versionSuffix.txt, below), and %HOST_NAME% will be replaced with the server name.
      </td>
    </tr>
    <tr>
      <td>
        newAccountUrl.txt
      </td>
      <td>
        URL for &#34;New account&#34; button on the login screen
      </td>
    </tr>
    <tr>
      <td colspan="1">
        accountHelpUrl.txt
      </td>
      <td colspan="1">
        URL for &#34;Account help&#34; button on the login screen
      </td>
    </tr>
    <tr>
      <td colspan="1">
        downloaderUrl.txt
      </td>
      <td colspan="1">
        URL for &#34;Get Data Retriever&#34; button in the Download popup
      </td>
    </tr>
    <tr>
      <td colspan="1">
        versionSuffix.txt
      </td>
      <td colspan="1">
        An optional string that will be appended to the version number, if the version number is included in the footer.
      </td>
    </tr>
    <tr>
      <td colspan="1">
        customMenu.json
      </td>
      <td colspan="1">
        This is the top horizontal menu. Look at the default (nbia) for an example.
      </td>
    </tr>
  </tbody>
</table>
The customMenu.json is an array, with each top-level object representing one top-level menu item, as follows.
<table>
  <colgroup>
    <col/>
    <col/>
  </colgroup>
  <tbody>
    <tr>
      <th>
        Name
      </th>
      <th>
        Purpose
      </th>
    </tr>
    <tr>
      <td>
        &#34;entryTitle&#34;
      </td>
      <td>
        The text of the top level menu item
      </td>
    </tr>
    <tr>
      <td>
        &#34;menuData&#34;
      </td>
      <td>
        &#34;target&#34; within &#34;menuData&#34; is the URL of the top-level menu item if you don&#39;t use a dropdown menu for this top-level item
      </td>
    </tr>
    <tr>
      <td>
        &#34;menuDataDropdown&#34;
        <ul>
          <li>
            &#34;menuText&#34;
          </li>
          <li>
            &#34;target&#34;
          </li>
        </ul>
      </td>
      <td>
        an array of dropdown menu items:
        <ul>
          <li>
            the text for the dropdown menu item
          </li>
          <li>
            the URL for the dropdown menu item
          </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>
<h2 id="NBIABrandingGuide-ExampleofBrandedProperties">
  Example of Branded Properties
</h2>
[
{
&#34;entryTitle&#34;: &#34;Home&#34;,
&#34;menuData&#34;: {
&#34;target&#34;: &#34;https://www.cancerimagingarchive.net&#34;
}
},
{
&#34;entryTitle&#34;: &#34;News&#34;,
&#34;menuData&#34;: {
&#34;target&#34;: &#34;https://www.cancerimagingarchive.net/news/&#34;
}
},
{
&#34;entryTitle&#34;: &#34;About Us&#34;,
&#34;menuDataDropdown&#34;: [
{
&#34;menuText&#34;: &#34;About The Cancer Imaging Archive (TCIA)&#34;,
&#34;target&#34;: &#34;https://www.cancerimagingarchive.net/about-the-cancer-imaging-archive-tcia&#34;
},
{
&#34;menuText&#34;: &#34;About the Cancer Imaging Program (CIP)&#34;,
&#34;target&#34;: &#34;https://www.cancerimagingarchive.net/about-the-cancer-imaging-program-cip/&#34;
},
{
&#34;menuText&#34;: &#34;About the University of Arkansas for Medical Sciences (UAMS)&#34;,
&#34;target&#34;: &#34;https://www.cancerimagingarchive.net/about-the-university-of-arkansas-for-medical-sciences-uams/&#34;
}
]
},
... 