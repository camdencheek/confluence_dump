Welcome to the caNanoLab 2.1.1 Installation Guide.Get SupportFor any general information about the application, support, or to report a bug, contact
<a href="mailto:caNanoLab-Support@ISB-CGC.org" rel="nofollow">
  caNanoLab-Support@ISB-CGC.org
</a>
.Print the Guide If you want to print a single page, refer to
<a href="https://wiki.nci.nih.gov/pages/viewpage.action?pageId=8164401" rel="nofollow">
  Printing a Page
</a>
.Topics in this document include:
<ul>
  <li>
    <a href="#caNanoLab2.1.1InstallationGuide-IntroductiontocaNanoLab" rel="nofollow">
      Introduction to caNanoLab
    </a>
  </li>
  <li>
    <a href="#caNanoLab2.1.1InstallationGuide-OpenSourceTechnologies" rel="nofollow">
      Open Source Technologies
    </a>
    <ul>
      <li>
        <a href="#caNanoLab2.1.1InstallationGuide-ObtainingthecaNanoLabSourceCode" rel="nofollow">
          Obtaining the caNanoLab Source Code
        </a>
      </li>
    </ul>
  </li>
  <li>
    <a href="#caNanoLab2.1.1InstallationGuide-AntBuildProperties" rel="nofollow">
      Ant Build Properties
    </a>
    <ul>
      <li>
        <a href="#caNanoLab2.1.1InstallationGuide-SettingProperties" rel="nofollow">
          Setting Properties
        </a>
        <ul>
          <li>
            <a href="#caNanoLab2.1.1InstallationGuide-Step1.ExtractcaNanoLab" rel="nofollow">
              Step 1. Extract caNanoLab
            </a>
          </li>
          <li>
            <a href="#caNanoLab2.1.1InstallationGuide-Step2.EditAntProperties" rel="nofollow">
              Step 2. Edit Ant Properties
            </a>
          </li>
        </ul>
      </li>
      <li>
        <a href="#caNanoLab2.1.1InstallationGuide-InstallationandDeployment" rel="nofollow">
          Installation and Deployment
        </a>
        <ul>
          <li>
            <a href="#caNanoLab2.1.1InstallationGuide-Step1.DBchangestobedeployedtomigratetoCSM5.2" rel="nofollow">
              Step 1. DB changes to be deployed to migrate to CSM 5.2
            </a>
            <ul>
              <li>
                <a href="#caNanoLab2.1.1InstallationGuide-aExecutethefollowingscriptsintheorderspecifiedbelow." rel="nofollow">
                  a Execute the following scripts in the order specified below.
                </a>
              </li>
              <li>
                <a href="#caNanoLab2.1.1InstallationGuide-bMigrateencryptionfrom4.xCSMdatabase." rel="nofollow">
                  b Migrate encryption from 4.x CSM database.
                </a>
              </li>
            </ul>
          </li>
          <li>
            <a href="#caNanoLab2.1.1InstallationGuide-Step2.caNanoLabinstallationinstructionstoupgradeto2.1.1" rel="nofollow">
              Step 2. caNanoLab installation instructions to upgrade to 2.1.1
            </a>
          </li>
        </ul>
      </li>
    </ul>
  </li>
  <li>
    <a href="#caNanoLab2.1.1InstallationGuide-Verification" rel="nofollow">
      Verification
    </a>
  </li>
</ul>
<h2 id="caNanoLab2.1.1InstallationGuide-IntroductiontocaNanoLab">
  Introduction to caNanoLab
</h2>
Welcome to the cancer Nanotechnology Laboratory (
<a href="https://cananolab.cancer.gov" rel="nofollow">
  https://cananolab.cancer.gov
</a>
). caNanoLab is a data sharing portal that supports the international biomedical nanotechnology research community to expedite and validate the use of nanotechnology in biomedicine. caNanoLab provides support to annotate nanomaterials with characterizations resulting from physico-chemical, in vitro, and in vivo assays and share characterizations and associated nanotechnology protocols in a secure environment.For more information about the 2.1.1 updates, refer to the
<a href="https://wiki.nci.nih.gov/pages/viewpage.action?pageId=314869978" rel="nofollow">
  caNanoLab 2.1.1 Release Note
</a>
.
<h2 id="caNanoLab2.1.1InstallationGuide-OpenSourceTechnologies">
  Open Source Technologies
</h2>
Download each of the following tools and follow the installation instructions provided with each respective product for your environment. Assistance from a MySQL database administrator is expected to properly configure the MySQL database. For MySQL database configuration and maintenance, it is also helpful to download the MySQL workbench (suite of GUI tools) at
<a href="http://www.mysql.com/downloads/workbench/" rel="nofollow"></a>
<a href="http://www.mysql.com/downloads/workbench/" rel="nofollow">
  http://www.mysql.com/downloads/workbench/
</a>
<a href="http://www.mysql.com/downloads/workbench/" rel="nofollow">
  <a href="http://www.cancer.gov/policies/linking" rel="nofollow">
    <img alt="Exit Disclaimer logo" src="https://wiki.nci.nih.gov/download/attachments/embedded-page/wikicontent/Exit%20Disclaimer%20to%20Include/exit_small.png?api=v2">
  </a>
</a>
<table>
  <colgroup>
    <col/>
    <col/>
  </colgroup>
  <tbody>
    <tr>
      <th>
        Product
      </th>
      <th>
        Link
      </th>
    </tr>
    <tr>
      <td>
        Java Software Development Kit (JDK) version 7.0 and set JAVA_HOME
      </td>
      <td>
        <a href="http://www.oracle.com/technetwork/java/javase/downloads/jdk7-downloads-1880260.html" rel="nofollow">
          http://www.oracle.com/technetwork/java/javase/downloads/jdk7-downloads-1880260.html
        </a>
        <a href="http://www.mysql.com/downloads/workbench/" rel="nofollow">
          <a href="http://www.cancer.gov/policies/linking" rel="nofollow">
            <img alt="Exit Disclaimer logo" src="https://wiki.nci.nih.gov/download/attachments/embedded-page/wikicontent/Exit%20Disclaimer%20to%20Include/exit_small.png?api=v2">
          </a>
        </a>
      </td>
    </tr>
    <tr>
      <td>
        Wildfly version 8.2.0.Final
      </td>
      <td>
        <a href="http://wildfly.org/downloads/" rel="nofollow">
          http://wildfly.org/downloads/
        </a>
        <a href="http://www.mysql.com/downloads/workbench/" rel="nofollow">
          <a href="http://www.cancer.gov/policies/linking" rel="nofollow">
            <img alt="Exit Disclaimer logo" src="https://wiki.nci.nih.gov/download/attachments/embedded-page/wikicontent/Exit%20Disclaimer%20to%20Include/exit_small.png?api=v2">
          </a>
        </a>
      </td>
    </tr>
    <tr>
      <td>
        Jakarta Ant version 1.8.x and set ANT_HOME environment variable
      </td>
      <td>
        <a href="http://archive.apache.org/dist/ant/binaries/" rel="nofollow"></a>
        <a href="http://archive.apache.org/dist/ant/binaries/+" rel="nofollow">
          http://archive.apache.org/dist/ant/binaries/
        </a>
        <a href="http://www.mysql.com/downloads/workbench/" rel="nofollow">
          <a href="http://www.cancer.gov/policies/linking" rel="nofollow">
            <img alt="Exit Disclaimer logo" src="https://wiki.nci.nih.gov/download/attachments/embedded-page/wikicontent/Exit%20Disclaimer%20to%20Include/exit_small.png?api=v2">
          </a>
        </a>
      </td>
    </tr>
    <tr>
      <td>
        MySQL version 5.1.x
      </td>
      <td>
        <a href="http://dev.mysql.com/downloads/mysql/5.1.html" rel="nofollow"></a>
        <a href="http://dev.mysql.com/downloads/mysql/5.1.html+" rel="nofollow">
          http://dev.mysql.com/downloads/mysql/5.1.html
        </a>
        <a href="http://www.mysql.com/downloads/workbench/" rel="nofollow">
          <a href="http://www.cancer.gov/policies/linking" rel="nofollow">
            <img alt="Exit Disclaimer logo" src="https://wiki.nci.nih.gov/download/attachments/embedded-page/wikicontent/Exit%20Disclaimer%20to%20Include/exit_small.png?api=v2">
          </a>
        </a>
      </td>
    </tr>
  </tbody>
</table>
<h3 id="caNanoLab2.1.1InstallationGuide-ObtainingthecaNanoLabSourceCode">
  Obtaining the caNanoLab Source Code
</h3>
Downloads for caNanoLab are available at
<a href="https://github.com/CBIIT/cananolab/tree/cananolab-2.1.1-rc-03" rel="nofollow">
  caNanoLab GitHub Repository
</a>
.The
<a href="https://wiki.nci.nih.gov/display/caNanoLab/caNanoLab+Software+License" rel="nofollow">
  caNanoLab Software License
</a>
applies.
<h2 id="caNanoLab2.1.1InstallationGuide-AntBuildProperties">
  Ant Build Properties
</h2>
<h3 id="caNanoLab2.1.1InstallationGuide-SettingProperties">
  Setting Properties
</h3>
Follow these steps to set the build and deploy properties required for building and deploying caNanoLab.
<h4 id="caNanoLab2.1.1InstallationGuide-Step1.ExtractcaNanoLab">
  Step 1.  Extract caNanoLab
</h4>
Extract the
<a href="https://github.com/CBIIT/cananolab/tree/cananolab-2.1.1-rc-03" rel="nofollow">
  GitHub location
</a>
to a location on your local system, for example,  C:\caNanoLab_2.1.1 This location is referred as  &lt;CANANOLAB_SOURCE&gt;  throughout the document. Verify that the following five folders exist in the directory  &lt;CANANOLAB_SOURCE&gt; :
<ul>
  <li>
    build
  </li>
  <li>
    cananolab-db
  </li>
  <li>
    cananolab-grid
  </li>
  <li>
    cananolab-webapp
  </li>
  <li>
    common
  </li>
</ul>
<h4 id="caNanoLab2.1.1InstallationGuide-Step2.EditAntProperties">
  Step 2. Edit Ant Properties
</h4>
Edit the Ant properties file,  build.properties , at  &lt;CANANOLAB_SOURCE&gt;/build  by specifying values for the following properties.
<table>
  <colgroup>
    <col/>
    <col/>
  </colgroup>
  <tbody>
    <tr>
      <th>
        Property
      </th>
      <th>
        Description
      </th>
    </tr>
    <tr>
      <td>
        file.repository.dir
      </td>
      <td>
        A directory on the system that hosts the Wildfly application server for storing uploaded files, for example,  C:/apps/caNanoLab .    Writable DirectoryThis directory should be writable by the user that starts the Wildfly server, and this directory should be created prior to starting the application. Use either double-back slashes or a single forward slash / as the file separator if working on Windows platform.
      </td>
    </tr>
    <tr>
      <td>
        admin.email
      </td>
      <td>
        The email address that receives requests for new user accounts, for example, the NCI CBIIT application support email for the NCI CBIIT installation.
      </td>
    </tr>
    <tr>
      <td>
        ldap.authentication.enabled
      </td>
      <td>
        A Boolean flag to indicate whether or not to use LDAP for user authentication. caNanoLab 2.1.1 and beyond does not support LDAP authentication. Set this to false.
      </td>
    </tr>
    <tr>
      <td>
        database.server
      </td>
      <td>
        The name of the server hosting the database, for example, localhost.
      </td>
    </tr>
    <tr>
      <td>
        database.port
      </td>
      <td>
        The database port number, for example, 3306.
      </td>
    </tr>
    <tr>
      <td>
        database.user
      </td>
      <td>
        The database user name used in the caNanoLab application, for example, cananolab_app.
      </td>
    </tr>
    <tr>
      <td>
        database.password
      </td>
      <td>
        The password for the database that the user specified above, for example, go!234.
      </td>
    </tr>
    <tr>
      <td>
        database.system.user
      </td>
      <td>
        The system database user name with privileges to create a database, create tables, and grant user accesses to a database, for example, root.
      </td>
    </tr>
    <tr>
      <td>
        database.system.password
      </td>
      <td>
        The password for the system database that the user specified above, for example, rootpass.
      </td>
    </tr>
    <tr>
      <td>
        jboss.server.dir
      </td>
      <td>
        The Wildfly server directory, for example:C:/apps/wildfly-8.2.0.Final/standalone
      </td>
    </tr>
  </tbody>
</table>
<h3 id="caNanoLab2.1.1InstallationGuide-InstallationandDeployment">
  Installation and Deployment
</h3>
<h4 id="caNanoLab2.1.1InstallationGuide-Step1.DBchangestobedeployedtomigratetoCSM5.2">
  Step 1.  DB changes to be deployed to migrate to CSM 5.2
</h4>
<h5 id="caNanoLab2.1.1InstallationGuide-aExecutethefollowingscriptsintheorderspecifiedbelow.">
  a   Execute the following scripts in the order specified below.
</h5>
<ol>
  <li>
    <ol>
      <li>
        <ol>
          <li>
            <ol>
              <li>
                Create the following table:





                CREATE TABLE favorite_data (







                favorite_data_id bigint(20) DEFAULT NULL,







                data_id bigint(20) DEFAULT NULL,







                data_type varchar(200) DEFAULT NULL,







                data_name varchar(200) DEFAULT NULL,







                login_name varchar(200) DEFAULT NULL,







                protocol_file_id bigint(20) DEFAULT NULL,







                pubmed_id bigint(20) DEFAULT NULL,







                editable tinyint(1) DEFAULT &#39;0&#39;,







                description text,







                protocol_file_title varchar(200) DEFAULT NULL


              </li>
              <li>
                <a href="https://github.com/CBIIT/common-security-module/blob/master/software/common/resources/db/db-upgrade/mysql/MigrationScript5.0MySQL.sql" rel="nofollow">
                  https://github.com/CBIIT/common-security-module/blob/master/software/common/resources/db/db-upgrade/mysql/MigrationScript5.0MySQL.sql
                </a>
                <a href="https://github.com/CBIIT/common-security-module/blob/master/software/common/resources/db/db-upgrade/mysql/MigrationScript5.1MySQL.sql" rel="nofollow"></a>
              </li>
              <li>
                <a href="https://github.com/CBIIT/common-security-module/blob/master/software/common/resources/db/db-upgrade/mysql/MigrationScript5.1MySQL.sql" rel="nofollow">
                  https://github.com/CBIIT/common-security-module/blob/master/software/common/resources/db/db-upgrade/mysql/MigrationScript5.1MySQL.sql
                </a>
              </li>
              <li>
                <a href="https://github.com/CBIIT/common-security-module/blob/master/software/common/resources/db/db-upgrade/mysql/MigrationScript5.1MySQL.sql" rel="nofollow"></a>
                Execute the following script to reset passwords for all of the accounts:
                update csm_user set password = &#39;zJPWCwDeSgG8j2uyHEABIQ==&#39;;
                update csm_user set first_time_login = 1;
              </li>
            </ol>
          </li>
        </ol>
      </li>
    </ol>
  </li>
</ol>
<h5 id="caNanoLab2.1.1InstallationGuide-bMigrateencryptionfrom4.xCSMdatabase.">
  b  Migrate encryption from 4.x CSM database.
</h5>
CSM 5.0 has introduced using AES encryption to encrpt CSM User information while storing it in CSM_USER table. If you are upgrading CSM from 4.x to 5.x, apart from migrating the database, you would need to run encryption migration. This step expects PASSWORD column values in CSM_USER are not altered from the their original values created through CSM API.
<ol>
  <li>
    <ol>
      <li>
        <ol>
          <li>
            <ol>
              <li>
                Download the CSM UPT v5.2 distribution file into a designated folder (for example, c:\csm_52). Be sure to note the folder name and location.
              </li>
              <li>
                Extract the contents of  the downloaded csm_upgrade5.2.zip into a designated folder (for example, c:\csm_52\csm_upgrade5.2).
              </li>
              <li>
                In the designated folder, find and modify the upgrade.properties file. Database properties must be updated with the upgraded database connection details.
              </li>
              <li>
                Open the cmd window and navigate to c:\csm_52\csm_upgrade5.2
              </li>
              <li>
                Run &#34;ant -Dproperties.file=upgrade.properties migration:run&#34;.
              </li>
            </ol>
          </li>
        </ol>
      </li>
    </ol>
  </li>
</ol>
<h4 id="caNanoLab2.1.1InstallationGuide-Step2.caNanoLabinstallationinstructionstoupgradeto2.1.1">
  Step 2.  caNanoLab installation instructions to upgrade to 2.1.1
</h4>
Follow these steps to install and deploy caNanoLab.
<table>
  <colgroup>
    <col/>
    <col/>
  </colgroup>
  <tbody>
    <tr>
      <th>
        #
      </th>
      <th>
        Action
      </th>
    </tr>
    <tr>
      <td>
        1
      </td>
      <td>
        Set up an environment variable  JBOSS_HOME  to point to the Wildfly installation directory.Windows PlatformUse either double back slashes // or a single forward slash / as the file separator if working on Windows platform, for example,  JBOSS_HOME=C:/wildfly-8.2.0.Final (C:\wildfly-8.2.0.Final would fail).
      </td>
    </tr>
    <tr>
      <td>
        2
      </td>
      <td>
        Execute the Ant build script build.xml located at  &lt;CANANOLAB_SOURCE&gt;/build  with the target  deploy:cananolab-webpp . Example  : Issue the following commands to execute the Ant script:C:\&gt;cd C:\caNanoLab_2.1\buildC:\caNanoLab_2.1\build&gt;ant deploy:cananolab-webapp  Successful execution of the Ant script generates the following artifacts that include two deployable web archive war files, configuration files and libraries for running the web application in the Wildfly environment, and also places these artifacts in the appropriate directories under  &lt;JBOSS_HOME &gt;. Artifacts generated are also available in the following folder under &lt;CANANOLAB_SOURCE&gt; :  target/dist/cananolab- webapp/caNanoLab.war     target/dist/common/ApplicationSecurityConfig.xml   target/dist/common/csmupt.csm.new.hibernate.cfg.xml   target/dist/common/csmupt423.csm.new.hibernate.cfg.xml   target/dist/common/login-config.xml   target/dist/common/mysql-connector-java-5.1.26.jar   target/dist/common/upt-ds.xml   target/dist/common/properties-service.xml   target/dist/common/upt-ds.xml    target/dist/common/uptEAR.ear   target/dist/common/bcprov-jdk15on-1.47.jar   target/dist/common/caNanoLab_modules.cli   target/dist/common/caNanoLab_setup.cli   target/dist/common/caNanoLab_deploy.cli   target/dist/common/csmapi-5.2.jar
      </td>
    </tr>
    <tr>
      <td>
        3
      </td>
      <td>
        We recommend increasing the JBoss JVM heap size to 2G bytes and permanent generation (permgen) memory space to 256M bytes by updating the file &lt;JBOSS_HOME&gt;/bin/standalone.conf with the following JAVA_OPTS:JAVA_OPTS=&#34;-Xms512m -Xmx2048m -XX:PermSize=128m  -XX:MaxPermSize=256m -Dsun.rmi.dgc.client.gcInterval=3600000   -Dsun.rmi.dgc.server.gcInterval=3600000&#34;This configuration file is read when Wildfly server starts.For a standalone server, pass in the JVM settings either as command line arguments when executing the $JBOSS_HOME/bin/standalone.sh script, or by declaring them in $JBOSS_HOME/bin/standalone.conf.(For Windows users, the script to execute is %JBOSS_HOME%/bin/standalone.bat while the JVM settings can be declared in %JBOSS_HOME%/bin/standalone.conf.bat.)
      </td>
    </tr>
    <tr>
      <td>
        4
      </td>
      <td>
        1.    Create a new directory structure  C:/local/content/caNanoLab/artifacts  and move the following artifacts.
        <ul>
          <li>
            csmapi-5.2.jar
          </li>
          <li>
            caNanoLab.war
          </li>
          <li>
            uptEAR.ear
          </li>
          <li>
            bcprov-jdk15on-1.47.jar
          </li>
          <li>
            mysql-connector-java-5.1.26.jar
          </li>
          <li>
            caNanoLab_modules.cli
          </li>
          <li>
            caNanoLab_setup.cli
          </li>
          <li>
            caNanoLab_deploy.cli
          </li>
        </ul>
        Create a new directory structure C:/local/content/caNanoLab/config and move the following artifacts.
        <ul>
          <li>
            ApplicationSecurityConfig.xml
          </li>
          <li>
            csmupt.csm.new.hibernate.cfg.xml
          </li>
          <li>
            wikihelp.properties
          </li>
        </ul>
      </td>
    </tr>
    <tr>
      <td>
        5
      </td>
      <td>
        Start JBoss application server in Standalone mode.From &lt;install-dir&gt;/bin:
        ./standalone.sh --server-config=standalone-full.xml  The cli scripts assumes the CLI port is running at 19990. If it is different, update the port number at the second line in the script. For Windows environment:jboss-cli.bat --file=C:/local/content/caNanoLab/artifacts/caNanoLab_modules.cli and press &lt;ENTER&gt;. For Linux environment:jboss-cli.sh --file= /local/content/caNanoLab/artifacts/caNanoLab_modules.cli and press &lt;ENTER&gt;.Run the remaining caNanoLab_setup.cli and caNanoLab_deploy.cli that deploys the caNanoLab and csmUPT.After successful completion, the following output appears in the window.{&#34;outcome&#34;=&gt; &#34;success&#34;} {&#34;outcome&#34;=&gt; &#34;success&#34;} {&#34;outcome&#34;=&gt; &#34;success&#34;} {&#34;outcome&#34;=&gt; &#34;success&#34;} { &#34;outcome&#34;=&gt; &#34;success&#34;, &#34;result&#34;=&gt; undefined }
      </td>
    </tr>
  </tbody>
</table>
<h2 id="caNanoLab2.1.1InstallationGuide-Verification">
  Verification
</h2>
Once the deployment artifacts are deployed and the Wildfly application server is correctly configured, shutdown and restart the Wildfly application server, which in turn starts the caNanoLab application.Open the URL, http://&lt;APP_SERVER_URL&gt;/caNanoLab/, for example, http://localhost:8080/caNanoLab. The Welcome/Login page displays.