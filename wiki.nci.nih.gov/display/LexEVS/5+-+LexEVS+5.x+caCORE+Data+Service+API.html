Contents of this Page
<ul>
  <li>
    <a href="#id-5LexEVS5.xcaCOREDataServiceAPI-Introduction" rel="nofollow">
      Introduction
    </a>
  </li>
  <li>
    <a href="#id-5LexEVS5.xcaCOREDataServiceAPI-caCORELexEVSComponents" rel="nofollow">
      caCORE LexEVS Components
    </a>
  </li>
  <li>
    <a href="#id-5LexEVS5.xcaCOREDataServiceAPI-LexEVSDataSources" rel="nofollow">
      LexEVS Data Sources
    </a>
    <ul>
      <li>
        <a href="#id-5LexEVS5.xcaCOREDataServiceAPI-NCIThesaurus" rel="nofollow">
          NCI Thesaurus
        </a>
      </li>
      <li>
        <a href="#id-5LexEVS5.xcaCOREDataServiceAPI-NCIMetathesaurus" rel="nofollow">
          NCI Metathesaurus
        </a>
      </li>
    </ul>
  </li>
  <li>
    <a href="#id-5LexEVS5.xcaCOREDataServiceAPI-Interfaces" rel="nofollow">
      Interfaces
    </a>
    <ul>
      <li>
        <a href="#id-5LexEVS5.xcaCOREDataServiceAPI-LexEVSDistributed" rel="nofollow">
          LexEVSDistributed
        </a>
      </li>
      <li>
        <a href="#id-5LexEVS5.xcaCOREDataServiceAPI-LexEVSDataService" rel="nofollow">
          LexEVSDataService
        </a>
      </li>
      <li>
        <a href="#id-5LexEVS5.xcaCOREDataServiceAPI-LexEVSService" rel="nofollow">
          LexEVSService
        </a>
      </li>
    </ul>
  </li>
  <li>
    <a href="#id-5LexEVS5.xcaCOREDataServiceAPI-SearchParadigm" rel="nofollow">
      Search Paradigm
    </a>
    <ul>
      <li>
        <a href="#id-5LexEVS5.xcaCOREDataServiceAPI-QueryingtheSystem" rel="nofollow">
          Querying the System
        </a>
      </li>
      <li>
        <a href="#id-5LexEVS5.xcaCOREDataServiceAPI-QueryOptions" rel="nofollow">
          QueryOptions
        </a>
      </li>
      <li>
        <a href="#id-5LexEVS5.xcaCOREDataServiceAPI-ExamplesofUse" rel="nofollow">
          Examples of Use
        </a>
        <ul>
          <li>
            <a href="#id-5LexEVS5.xcaCOREDataServiceAPI-Example,QueryByExamplewithNoQueryOptions" rel="nofollow">
              Example, Query By Example with No Query Options
            </a>
          </li>
          <li>
            <a href="#id-5LexEVS5.xcaCOREDataServiceAPI-Example,QueryByExamplewithQueryOptions" rel="nofollow">
              Example, Query By Example with Query Options
            </a>
          </li>
        </ul>
      </li>
    </ul>
  </li>
  <li>
    <a href="#id-5LexEVS5.xcaCOREDataServiceAPI-WebServicesAPI" rel="nofollow">
      Web Services API
    </a>
    <ul>
      <li>
        <a href="#id-5LexEVS5.xcaCOREDataServiceAPI-Configuration" rel="nofollow">
          Configuration
        </a>
      </li>
      <li>
        <a href="#id-5LexEVS5.xcaCOREDataServiceAPI-BuildingaJavaSOAPClient" rel="nofollow">
          Building a Java SOAP Client
        </a>
      </li>
    </ul>
  </li>
  <li>
    <a href="#id-5LexEVS5.xcaCOREDataServiceAPI-XML-HTTPAPI" rel="nofollow">
      XML-HTTP API
    </a>
    <ul>
      <li>
        <a href="#id-5LexEVS5.xcaCOREDataServiceAPI-ServiceLocationandSyntax" rel="nofollow">
          Service Location and Syntax
        </a>
      </li>
      <li>
        <a href="#id-5LexEVS5.xcaCOREDataServiceAPI-ExamplesofUse.1" rel="nofollow">
          Examples of Use
        </a>
      </li>
      <li>
        <a href="#id-5LexEVS5.xcaCOREDataServiceAPI-WorkingwithResultSets" rel="nofollow">
          Working with Result Sets
        </a>
      </li>
    </ul>
  </li>
  <li>
    <a href="#id-5LexEVS5.xcaCOREDataServiceAPI-DistributedLexEVSAPI" rel="nofollow">
      Distributed LexEVS API
    </a>
    <ul>
      <li>
        <a href="#id-5LexEVS5.xcaCOREDataServiceAPI-Overview" rel="nofollow">
          Overview
        </a>
      </li>
      <li>
        <a href="#id-5LexEVS5.xcaCOREDataServiceAPI-Architecture" rel="nofollow">
          Architecture
        </a>
      </li>
      <li>
        <a href="#id-5LexEVS5.xcaCOREDataServiceAPI-LexEVSAnnotations" rel="nofollow">
          LexEVS Annotations
        </a>
      </li>
      <li>
        <a href="#id-5LexEVS5.xcaCOREDataServiceAPI-AspectOrientedProgrammingProxies" rel="nofollow">
          Aspect Oriented Programming Proxies
        </a>
      </li>
      <li>
        <a href="#id-5LexEVS5.xcaCOREDataServiceAPI-LexEVSAPIDocumentation" rel="nofollow">
          LexEVS API Documentation
        </a>
      </li>
      <li>
        <a href="#id-5LexEVS5.xcaCOREDataServiceAPI-LexEVSInstallationandConfiguration" rel="nofollow">
          LexEVS Installation and Configuration
        </a>
      </li>
      <li>
        <a href="#id-5LexEVS5.xcaCOREDataServiceAPI-ExampleUsingtheDLBAPI" rel="nofollow">
          Example Using the DLB API
        </a>
      </li>
    </ul>
  </li>
</ul>
<h2 id="id-5LexEVS5.xcaCOREDataServiceAPI-Introduction">
  Introduction
</h2>
This document is a section of the
<a href="https://wiki.nci.nih.gov/pages/viewpage.action?pageId=62427453" rel="nofollow">
  LexEVS 5.x Programmer&#39;s Guide
</a>
.This document describes the components of the caCORE LexEVS and the service interface layer provided by the EVS API architecture. It gives examples of how to use the EVS APIs. It also describes the Distributed LexEVS API and the Distributed LexEVS APIAdapter.
<h2 id="id-5LexEVS5.xcaCOREDataServiceAPI-caCORELexEVSComponents">
  caCORE LexEVS Components
</h2>
The caCORE LexEVS API is a public domain, open source wrapper that provides full access to the LexEVS Terminology Server. LexEVS hosts the NCI Thesaurus, the NCI Metathesaurus, and several other vocabularies. Java clients accessing the NCI Thesaurus and Metathesaurus vocabularies communicate their requests via the open source caCORE LexEVS APIs, as shown in Overview of the caCORE LexEVS 4.0 release components.The following figure presents an overview of the caCORE LexEVS 4.0 release components.There is also information about the 3.2 EVS Model, Java, SOAP, REST:
<ul>
  <li>
    =&gt; caCORE 3.2 =&gt;DTSRTPC =&gt;DTS =&gt; Individual Terminologies
  </li>
  <li>
    =&gt; Metaphrase = Metathesaurus
  </li>
</ul>
<img alt="This graphic shows the 4.0 EVS API model as described above and the 3.2 EVS Model as well." src="https://wiki.nci.nih.gov/download/attachments/embedded-page/LexEVS/5%20-%20LexEVS%205.x%20caCORE%20Data%20Service%20API/Overview_LexEVS_4.0_Release_Components.jpg?api=v2">
The open source interfaces provided as part of caCORE LexEVS 5.x include Java APIs, a SOAP interface, and an HTTP REST interface. The Java APIs are based on the EVS 3.2 object model and the LexEVS Service object model.The EVS 3.2 model, exposed as part of caCORE 3.2, has been re-released with LexEVS as the back-end terminology service in place of the proprietary Apelon DTS back end. The SOAP and HTTP REST interfaces are also based on the 3.2 object model. The SDK 4.0 was used to generate the EVS 3.2 Java API, as well as the SOAP and HTTP REST interfaces.The only difference between the EVS 3.2 API exposed as part of the caCORE LexEVS 5.x and the API exposed as part of caCORE 3.2 is the back-end terminology server used to retrieve the vocabulary data. The interface (API calls) are the same and should only require minor adjustments to user applications.NoteYou cannot integrate caCORE 3.2 components with caCORE LexEVS 5.x. If you used multiple components of caCORE 3.2 (for example, EVS with caDSR), you need to continue to work with the caCORE 3.2 release until the other caCORE 4.0 components are available.The LexEVS object model was developed by the Mayo Clinic. In its native form, the associated API assumes a local, non-distributed means of access. With caCORE LexEVS 5.x, a proxy layer enables EVS API clients to access the native LexEVS API from anywhere without having to worry about the underlying data sources. This is called the Distributed LexEVS (DLB) API.The DLB Adapter is another option for caCORE LexEVS 5.x clients who choose to interface directly with the LexEVS API. This is essentially a set of convenience methods intended to simplify the use of the LexEVS API. For example, a series of method calls against the DLB API might equate to a single method call to the DLB Adapter.NoteThe DLB Adapter is not intended to represent a complete set of convenience methods. As part of the caCORE LexEVS 5.x release, the intention is that users will work with the DLB API and suggest useful methods of convenience to the EVS Development Team.
<h2 id="id-5LexEVS5.xcaCOREDataServiceAPI-LexEVSDataSources">
  LexEVS Data Sources
</h2>
The LexEVS data source is the open source LexEVS terminology server. EVS clients interface with the LexEVS API to retrieve desired vocabulary data. The EVS provides the NCI with services and resources for controlled biomedical vocabularies, including the NCI Thesaurus and the NCI Metathesaurus.
<h3 id="id-5LexEVS5.xcaCOREDataServiceAPI-NCIThesaurus">
  NCI Thesaurus
</h3>
The NCI Thesaurus is composed of over 27,000 concepts represented by about 78,000 terms. The Thesaurus is organized into 18 hierarchical trees covering areas such as Neoplasms, Drugs, Anatomy, Genes, Proteins, and Techniques. These terms are deployed by the NCI in its automated systems for uses such as key wording and database coding.
<h3 id="id-5LexEVS5.xcaCOREDataServiceAPI-NCIMetathesaurus">
  NCI Metathesaurus
</h3>
The NCI Metathesaurus maps terms from one standard vocabulary to another, facilitating collaboration, data sharing, and data pooling for clinical trials and scientific databases. The Metathesaurus is based on the Unified Medical Language System (UMLS) developed by the National Library of Medicine (NLM). It is composed of over 70 biomedical vocabularies.
<h2 id="id-5LexEVS5.xcaCOREDataServiceAPI-Interfaces">
  Interfaces
</h2>
Main interfaces included in the LexEVSAPI package.
<h3 id="id-5LexEVS5.xcaCOREDataServiceAPI-LexEVSDistributed">
  LexEVSDistributed
</h3>
The Distributed LexEVS Portion of LexEVSAPI. This interface is a framework for calling LexEVS API methods remotely, along with enforcing security measures.
<a href="http://lexevsapi.nci.nih.gov/lexevsapi50/docs/org/LexGrid/LexBIG/caCore/interfaces/LexEVSDistributed.html" rel="nofollow">
  JavaDoc
</a>
<h3 id="id-5LexEVS5.xcaCOREDataServiceAPI-LexEVSDataService">
  LexEVSDataService
</h3>
The caCORE-SDK Data Service Portion of LexEVSAPI. This extends on the caCORE ApplicationService to provide additional Query Options.
<a href="http://lexevsapi.nci.nih.gov/lexevsapi50/docs/org/LexGrid/LexBIG/caCore/interfaces/LexEVSDataService.html" rel="nofollow">
  JavaDoc
</a>
<h3 id="id-5LexEVS5.xcaCOREDataServiceAPI-LexEVSService">
  LexEVSService
</h3>
The Main LexEVSAPI Interface. This includes support for caCORE-SDK Data Service calls as well as remote LexBIG API calls.
<a href="http://lexevsapi.nci.nih.gov/lexevsapi50/docs/org/LexGrid/LexBIG/caCore/interfaces/LexEVSService.html" rel="nofollow">
  JavaDoc
</a>
<h2 id="id-5LexEVS5.xcaCOREDataServiceAPI-SearchParadigm">
  Search Paradigm
</h2>
The caCORE LexEVS architecture includes a service layer that provides a single, common access paradigm to clients that use any of the provided interfaces. As an object-oriented middleware layer designed for flexible data access, caCORE LexEVS relies heavily on strongly typed objects and an object-in/object-out mechanism.Accessing and using a caCORE LexEVS system requires the following steps:
<ol>
  <li>
    Ensure that the client application has access to the objects in the domain space.
  </li>
  <li>
    Formulate the query criteria using the domain objects.
  </li>
  <li>
    Establish a connection to the server.
  </li>
  <li>
    Submit the query objects and specify the desired class of objects to be returned.
  </li>
  <li>
    Use and manipulate the result set as desired.
  </li>
</ol>
caCORE LexEVS systems use four native application programming interfaces (APIs). Each interface uses the same paradigm to provide access to the caCORE LexEVS domain model, with minor changes specific to the syntax and structure of the clients. The following sections describe each API, identify installation and configuration requirements, and provide code examples.The following figure presents a sequence diagram - caCORE 4.0 LexEVS API search mechanism. The sequence diagram illustrates the caCORE LexEVS API search mechanism implemented to access the NCI EVS vocabularies.
<img alt="This graphic shows the search mechanism to access the NCI EVS vocabularies." src="https://wiki.nci.nih.gov/download/attachments/embedded-page/LexEVS/5%20-%20LexEVS%205.x%20caCORE%20Data%20Service%20API/CaCORE_4.0_LexEVS_API_Search_Mechanism.jpg?api=v2">
<h3 id="id-5LexEVS5.xcaCOREDataServiceAPI-QueryingtheSystem">
  Querying the System
</h3>
LexEVS conforms to the caCORE SDK API - for more information see
<a href="https://wiki.nci.nih.gov/pages/viewpage.action?pageId=187761540" rel="nofollow">
  caCORE SDK 4.1 Programmer&#39;s Guide
</a>
.
<h3 id="id-5LexEVS5.xcaCOREDataServiceAPI-QueryOptions">
  QueryOptions
</h3>
<a href="http://lexevsapi.nci.nih.gov/lexevsapi50/docs/org/LexGrid/LexBIG/caCore/applicationservice/QueryOptions.html" rel="nofollow">
  QueryOptions
</a>
are designed to give the user extra control over the query before it is sent to the system. QueryOptions may be used to modify a query in these ways:
<ol>
  <li>
    &#39;CodingScheme&#39; - Restricts the query to the specified Coding Scheme, instead of querying every available Coding Scheme.
  </li>
  <li>
    CodingSchemeVersionOrTag&#39; - Restricts the query to the specified Version of the Coding Scheme. Note that:
    <ol>
      <li>
        This may NOT be specified without also specifying the &#39;CodingScheme&#39; attribute.
      </li>
      <li>
        If left unset, it will default to the version of the Coding Scheme tagged as &#34;PRODUCTION&#34; in the system.
      </li>
    </ol>
  </li>
  <li>
    &#39;SecurityTokens&#39; - Security Tokens to use with the specified query. These Security Tokens are scoped to the current query ONLY. An subsequent queries will also need to specify the necessary Query Options.
  </li>
  <li>
    &#39;LazyLoad&#39; - Some high use-case model Objects have bee &#39;lazy-load&#39; enabled. This means that some attributes and associations of a model Object may not be fully populated when returned to the user. This allows for faster query times. This defaults to false, meaning that all attributes and associations will be eagerly fetched by the server and model Objects will always be fully populated. To enable this on applicable Objects, set to true.NoteLazy Loading may only be used in conjunction with specifying a Coding Scheme and Version with the &#39;CodingScheme&#39; and &#39;CodingSchemeVersionOrTag&#39; attributes above.
  </li>
  <li>
    &#39;ResultPageSize&#39; - the page size of results to return. The higher the number, the more results the system will return to the user at once. The client will request the next group of query results transparenly. This parameter is useful for performance tuning. For example, if a query returns a result of10,000 Objects, a &#39;ResultPageSize&#39; of &#39;1000&#39; would make 10 calls to the server returning a page of 1000 results each time. If left unset, this value will default to the default set Page Size.
  </li>
</ol>
<h3 id="id-5LexEVS5.xcaCOREDataServiceAPI-ExamplesofUse">
  Examples of Use
</h3>
<h4 id="id-5LexEVS5.xcaCOREDataServiceAPI-Example,QueryByExamplewithNoQueryOptions">
  Example, Query By Example with No Query Options
</h4>
Java Code Snippet
public static void main(String[] args)
{
try {
LexEVSApplicationService appService =
(LexEVSApplicationService)ApplicationServiceProvider.
getApplicationService(&#34;EvsServiceInfo&#34;);
Entity entity = new Entity()
entity.setEntityCode(&#34;C1234&#34;);
List&lt;Entity&gt; list = appService.search(Entity.class, entity);
} catch(ApplicationException ex)\{
}
}

Explanation of statements in explains specific statements in the code by line number.
<table>
  <tbody>
    <tr>
      <th>
        Line Number
      </th>
      <th>
        Explanation
      </th>
    </tr>
    <tr>
      <td>
        4
      </td>
      <td>
        Creates an instance of a class that implements the LexEVSApplicationService interface. This interface defines the service methods used to access data objects.
      </td>
    </tr>
    <tr>
      <td>
        7
      </td>
      <td>
        Construct the Query By Example Object and populate it with the desired search critieria. For this example, seach for any &#39;Entity&#39; with an &#39;entityCode&#39; attribute equaling &#39;C1234&#39;.
      </td>
    </tr>
    <tr>
      <td>
        9
      </td>
      <td>
        Calls the search method of the LexEVSApplicationService object.  This method returns a List Collection. This list will contain all of the &#39;Entity&#39; Objects that match the search critieria. It this case, it will return all &#39;Entity&#39; Objects with an &#39;entityCode&#39; of &#34;C1234&#34;.
      </td>
    </tr>
  </tbody>
</table>
<h4 id="id-5LexEVS5.xcaCOREDataServiceAPI-Example,QueryByExamplewithQueryOptions">
  Example, Query By Example with Query Options
</h4>
Java Code Snippet
public static void main(String[] args)
{
try {
LexEVSApplicationService appService = (LexEVSApplicationService)ApplicationServiceProvider.
getApplicationService(&#34;EvsServiceInfo&#34;);
QueryOptions queryOptions = new QueryOptions();
queryOptions.setCodingScheme(&#34;NCI Thesaurus&#34;);
CodingSchemeVersionOrTag csvt = new CodingSchemeVersionOrTag();
csvt.setVersion(&#34;09.10d&#34;);
queryOptions.setCodingSchemeVersionOrTag(csvt);
Entity entity = new Entity();
entity.setEntityCode(&#34;C1234&#34;);
List&amp;lt;Entity&amp;gt; list = appService.search(Entity.class, entity, queryOptions);
}
catch(ApplicationException ex){
}
}

Explanation of statements in explains specific statements in the code by line number.
<table>
  <tbody>
    <tr>
      <th>
        Line Number
      </th>
      <th>
        Explanation
      </th>
    </tr>
    <tr>
      <td>
        4
      </td>
      <td>
        Creates an instance of a class that implements the LexEVSApplicationService interface. This interface defines the service methods used to access data objects.
      </td>
    </tr>
    <tr>
      <td>
        7
      </td>
      <td>
        Construct the QueryOptions Object.
      </td>
    </tr>
    <tr>
      <td>
        8
      </td>
      <td>
        Populate the QueryOptions with the desired Coding Scheme.
      </td>
    </tr>
    <tr>
      <td>
        9
      </td>
      <td>
        Construct a CodingSchemeVersionOrTag Object.
      </td>
    </tr>
    <tr>
      <td>
        10
      </td>
      <td>
        Populate the CodingSchemeVersionOrTag Object with the desired Version.
      </td>
    </tr>
    <tr>
      <td>
        11
      </td>
      <td>
        Populate the QueryOptions with the above CodingSchemeVersionOrTag Object.
      </td>
    </tr>
    <tr>
      <td>
        12
      </td>
      <td>
        Construct the Query By Example Object and populate it with the desired search critieria. For this example, seach for any &#39;Entity&#39; with an &#39;entityCode&#39; attribute equaling &#39;C1234&#39;.
      </td>
    </tr>
    <tr>
      <td>
        14
      </td>
      <td>
        Calls the search method of the LexEVSApplicationService object, along with the QueryOptions. This method returns a List Collection. This list will contain all of the &#39;Entity&#39; Objects that match the search critieria, while being further modified by the QueryOptions. It this case, it will return all &#39;Entity&#39; Objects with an &#39;entityCode&#39; of &#34;C1234&#34; belonging to the CodingScheme &#34;NCI Thesaurus&#34; Version &#34;09.10d&#34;.
      </td>
    </tr>
  </tbody>
</table>
<h2 id="id-5LexEVS5.xcaCOREDataServiceAPI-WebServicesAPI">
  Web Services API
</h2>
The caCORE LexEVS Web Services API enables access to caCORE LexEVS data and vocabulary data from development environments where the Java API cannot be used, or where use of XML Web services is more desirable. This includes non-Java platforms and languages such as Perl, C/C++, .NET framework (C#, VB.Net), and Python.The Web services interface can be used in any language-specific application that provides a mechanism for consuming XML Web services based on the Simple Object Access Protocol (SOAP). In those environments, connecting to caCORE LexEVS can be as simple as providing the end-point URL. Some platforms and languages require additional client-side code to handle the implementation of the SOAP envelope and the resolution of SOAP types.To view a list of packages that cater to different programming languages, visit http://www.w3.org/TR/SOAP/ and http://www.soapware.org/.To maximize standards-based interoperability, the caCORE Web service conforms to the Web Services Interoperability Organization (WS-I) basic profile. The WS-I basic profile provides a set of non-proprietary specifications and implementation guidelines that enable interoperability between diverse systems. For more information about WS-I compliance, visit
<a href="http://www.ws-i.org" rel="nofollow">
  http://www.ws-i.org
</a>
.On the server side, Apache Axis is used to provide SOAP-based, inter-application communication. Axis provides the appropriate serialization and deserialization methods for the JavaBeans to achieve an application-independent interface. For more information about Axis, visit
<a href="http://ws.apache.org/axis/" rel="nofollow">
  http://ws.apache.org/axis/
</a>
.
<h3 id="id-5LexEVS5.xcaCOREDataServiceAPI-Configuration">
  Configuration
</h3>
The caCORE/LexEVS WSDL file is located at
<a href="http://lexevsapi.nci.nih.gov/lexevsapi50/services/lexevsapi50Service?wsdl" rel="nofollow">
  http://lexevsapi.nci.nih.gov/lexevsapi50/services/lexevsapi50Service?wsdl
</a>
. In addition to describing the protocols, ports, and operations exposed by the caCORE LexEVS Web service, this file can be used by a number of IDEs and tools to generate stubs for caCORE LexEVS objects. This enables code on different platforms to instantiate native objects for use as parameters and return values for the Web service methods. For more information on how to use the WSDL file to generate class stubs, consult the specific documentation for your platform.The caCORE LexEVS Web services interface has a single end point called lexevsapi50Service, which is located at
<a href="http://lexevsapi.nci.nih.gov/lexevsapi50/services/lexevsapi50Service" rel="nofollow">
  http://lexevsapi.nci.nih.gov/lexevsapi50/services/lexevsapi50Service
</a>
. Client applications should use this URL to invoke Web service methods.
<h3 id="id-5LexEVS5.xcaCOREDataServiceAPI-BuildingaJavaSOAPClient">
  Building a Java SOAP Client
</h3>
LexEVSAPI provides a tool to create a Java SOAP client capable of connecting to a LexEVSAPI SOAP service.In the ./webServiceSoapClient contains a build.xml file that will construct a LexEVSAPI SOAP client. Before building, you may edit this build.xml file to customize the build process. Editable properties include &#39;wsdlURL&#39; and &#39;webServiceNamespace&#39;. An example configuration is below:
&lt;property name=&#34;wsdlURL&#34; value=&#34;http://bmidev4:8180/lexevsapi50/services/lexevsapi50Service?wsdl&#34;/&gt;
&lt;property name=&#34;webServiceNamespace&#34; value=&#34;http://bmidev4:8180/lexevsapi50/services/lexevsapi50Service&#34;/&gt;

To build the client, use the command &#39;ant all&#39; from the ./webServiceSoapClient directory.
<h2 id="id-5LexEVS5.xcaCOREDataServiceAPI-XML-HTTPAPI">
  XML-HTTP API
</h2>
The caCORE LexEVS XML-HTTP API, based on the REST (Representational State Transfer) architectural style, provides a simple interface using the HTTP protocol. In addition to its ability to be invoked from most Internet browsers, developers can use this interface to build applications that do not require any programming overhead other than an HTTP client. This is particularly useful for developing Web applications using AJAX (Asynchronous JavaScript and XML).
<h3 id="id-5LexEVS5.xcaCOREDataServiceAPI-ServiceLocationandSyntax">
  Service Location and Syntax
</h3>
The CORE EVS XML-HTTP interface uses the following URL syntax:
http://{server}/{servlet}?query={returnClass}&amp;{criteria}
	&amp;startIndex={index}
	&amp;codingSchemeName={codingSchemeName}
	&amp;codingSchemeVersion={codingSchemeVersion}

The following table explains the syntax, indicates whether specific elements are required, and gives examples.
<table>
  <tbody>
    <tr>
      <th>
        Element
      </th>
      <th>
        Meaning
      </th>
      <th>
        Required
      </th>
      <th>
        Example
      </th>
    </tr>
    <tr>
      <td>
        server
      </td>
      <td>
        Name of the Web server on which the caCORE LexEVS 5.0 Web application is deployed.
      </td>
      <td>
        Yes
      </td>
      <td>
        lexevsapi.nci.nih.gov/lexevsapi50
      </td>
    </tr>
    <tr>
      <td>
        servlet
      </td>
      <td>
        URI and name of the servlet that will accept the HTTP GET requests.
      </td>
      <td>
        Yes
      </td>
      <td>
        lexevsapi50/GetXML lexevsapi50/GetHTML
      </td>
    </tr>
    <tr>
      <td>
        returnClass
      </td>
      <td>
        Class name indicating the type of objects that this query should return.
      </td>
      <td>
        Yes
      </td>
      <td>
        query=DescLogicConcept
      </td>
    </tr>
    <tr>
      <td>
        criteria
      </td>
      <td>
        Search request criteria describing the requested objects.
      </td>
      <td>
        Yes
      </td>
      <td>
        DescLogicConcept [@id=2]
      </td>
    </tr>
    <tr>
      <td>
        index
      </td>
      <td>
        Starting index of the result set.
      </td>
      <td>
        No
      </td>
      <td>
        startIndex=25
      </td>
    </tr>
    <tr>
      <td>
        codingSchemeName
      </td>
      <td>
        Restrict the query to a specific Coding Scheme Name.
      </td>
      <td>
        No
      </td>
      <td>
        codingSchemeName=NCI_Thesaurus
      </td>
    </tr>
    <tr>
      <td>
        codingSchemeVersion
      </td>
      <td>
        Restrict the query to a specific Coding Scheme Version.
      </td>
      <td>
        NoNoteMust be used in conjunction with a &#39;codingSchemeName&#39;
      </td>
      <td>
        codingSchemeVersion=09.12d
      </td>
    </tr>
  </tbody>
</table>
The caCORE LexEVS architecture currently provides two servlets that accept incoming requests:
<ul>
  <li>
    GetXML returns results in an XML format that can be parsed and consumed by most programming languages and many document authoring and management tools.
  </li>
  <li>
    GetHTML presents result using a simple HTML interface that can be viewed by most modern Internet browsers.
  </li>
</ul>
Within the request string of the URL, the criteria element specifies the search criteria using XQuery-like syntax. Within this syntax, square brackets ([ and ]) represent attributes and associated roles of a class, the at symbol (@) signals an attribute name/value pair, and a forward slash character / specifies nested criteria.Criteria statements in XML-HTTP queries generally use the following syntax (although you can also build more complex statements):
{ClassName}[@{attributeName}={value}] [@{attributeName}={value}]...

ClassName}[@{attributeName}={value}]/

{ClassName}[@{attributeName}={value}]/...

The following table explains the syntax for criteria statements and gives examples.
<table>
  <tbody>
    <tr>
      <th>
        Parameter
      </th>
      <th>
        Meaning
      </th>
      <th>
        Example
      </th>
    </tr>
    <tr>
      <td>
        ClassName
      </td>
      <td>
        The name of a class.
      </td>
      <td>
        Entity
      </td>
    </tr>
    <tr>
      <td>
        attributeName
      </td>
      <td>
        The name of an attribute of the return class or an associated class
      </td>
      <td>
        _entityCode
      </td>
    </tr>
    <tr>
      <td>
        value
      </td>
      <td>
        The value of an attribute.
      </td>
      <td>
        C123*
      </td>
    </tr>
  </tbody>
</table>
<h3 id="id-5LexEVS5.xcaCOREDataServiceAPI-ExamplesofUse.1">
  Examples of Use
</h3>
The examples in the following table demonstrate the usage of the XML-HTTP interface. In actual usage, these queries would either be submitted by a block of code or entered in the address bar of a Web browser.Notehe servlet name GetXML in each of the examples can be replaced with GetHTML to view with layout and markup in a browser.
<table>
  <tbody>
    <tr>
      <th>
        Query
      </th>
      <td>
        [http://lexevsapi.nci.nih.gov/lexevsapi50/GetXML?query=Entity[@_entityCode=C1272*]
      </td>
    </tr>
    <tr>
      <th>
        Semantic Meaning
      </th>
      <td>
        Find all objects of type Entity that contain an &#39;entityCode&#39; matching the pattern &#39;C123*&#39;.
      </td>
    </tr>
  </tbody>
</table>
<h3 id="id-5LexEVS5.xcaCOREDataServiceAPI-WorkingwithResultSets">
  Working with Result Sets
</h3>
Because HTTP is a stateless protocol, the caCORE LexEVS server cannot detect the context of any incoming request. Consequently, each invocation of GetXML or GetHTML must contain all of the information necessary to retrieve the request, regardless of previous requests. Developers should consider this when working with the XML-HTTP interface.
<ul>
  <li>
    Controlling the Start Index To specify a specific start position in the result set, specify the &amp;startIndex parameter. This will scroll to the desired position within the set of results.
  </li>
  <li>
    Internal-Use Parameters A number of parameters, such as &amp;resultCounter, &amp;pageSize, and &amp;page, are used internally by the system and are not designed to be set by the user.
  </li>
</ul>
NoteWhen specifying attribute values in the query string, note that use of the following characters generates an error: [ ] / \ # &amp; %
<h2 id="id-5LexEVS5.xcaCOREDataServiceAPI-DistributedLexEVSAPI">
  Distributed LexEVS API
</h2>
<h3 id="id-5LexEVS5.xcaCOREDataServiceAPI-Overview">
  Overview
</h3>
In place of the existing EVS 3.2 object model, caCORE LexEVS is making a gradual transition toward a pure LexEVS back-end terminology server and exposure of the LexEVS Service object model. caCORE 3.2 and earlier required a custom API layer between external users of the system and the proprietary Apelon Terminology Server APIs. With the transition to LexEVS, caCORE LexEVS can publicly expose the open source terminology service API without requiring a custom API layer.
<h3 id="id-5LexEVS5.xcaCOREDataServiceAPI-Architecture">
  Architecture
</h3>
The LexEVS API is exposed by the LexEVS caCORE System for remote, distributed access. The caCORE System&#39;s LexEVSApplicationService class implements the LexBIGService interface, effectively exposing LexEVS via caCORE.Since in many cases the objects returned from the LexBIGService are not merely beans, but full-fledged data access objects (DAOs), the caCORE LexEVS client is configured to proxy method calls into the LexEVS objects and forward them to the caCORE server so that they execute within the LexEVS environment. The following figure shows the DLB architecture (caCORE =&gt; Application Service === Spring Remoting === caCORE Server =&gt; LexBIG Client = &gt;LexBIG Datastore).
<img alt="This graphic shows DLB architecture as described above." src="https://wiki.nci.nih.gov/download/attachments/embedded-page/LexEVS/5%20-%20LexEVS%205.x%20caCORE%20Data%20Service%20API/DLB_Architecture.jpg?api=v2">
The DLB environment will be configured on the caCORE LexEVS Server (
<a href="http://lexevsapi.nci.nic.gov/lexevsapi50" rel="nofollow">
  http://lexevsapi.nci.nic.gov/lexevsapi50
</a>
). This will give the server access to the LexEVS database and other resources. The client must therefore go through the caCORE LexEVS server to access any LexEVS data.
<h3 id="id-5LexEVS5.xcaCOREDataServiceAPI-LexEVSAnnotations">
  LexEVS Annotations
</h3>
To address LexEVS DAOs, the LexEVS API integration incorporated the addition of (1) Java annotation marking methods that can be safely executed on the client side; and (2) classes that can be passed to the client without being wrapped by a proxy. The annotation is named @lgClientSideSafe. Every method in the LexEVS API that is accessible to the caCORE LexEVS user had to be considered and annotated if necessary.
<h3 id="id-5LexEVS5.xcaCOREDataServiceAPI-AspectOrientedProgrammingProxies">
  Aspect Oriented Programming Proxies
</h3>
LexEVS integration with caCORE LexEVS was accomplished using Spring Aspect Oriented Programming (AOP) to proxy the LexEVS classes and intercept calls to their methods. The caCORE LexEVS client wraps every object returned by the LexBIGService inside an AOP Proxy with advice from a LexBIGMethodInterceptor (&#34;the interceptor&#34;).The following graphic shows a sequence diagram showing method interception. The interceptor is responsible for intercepting all client calls on the methods in each object. If a method is marked with the @lgClientSideSafe annotation, it proceeds normally. Otherwise, the object, method name, and parameters are sent to the caCORE LexEVS server for remote execution.
<img alt="This graphic shows the sequence diagram described above." src="https://wiki.nci.nih.gov/download/attachments/embedded-page/LexEVS/5%20-%20LexEVS%205.x%20caCORE%20Data%20Service%20API/Sequence_Diagram_Showing_Method_Interception.jpg?api=v2">
<h3 id="id-5LexEVS5.xcaCOREDataServiceAPI-LexEVSAPIDocumentation">
  LexEVS API Documentation
</h3>
The Mayo Clinic wrote the LexEVS 5.0 API. Documentation describing the LexEVS Service Model, available on the
<a href="https://wiki.nci.nih.gov/x/eYBoCw" rel="nofollow">
  LexGRID Vocabulary Services for caBIG® GForge archive
</a>
.
<h3 id="id-5LexEVS5.xcaCOREDataServiceAPI-LexEVSInstallationandConfiguration">
  LexEVS Installation and Configuration
</h3>
The DLB API is strictly a Java interface and requires Internet access for remote connectivity to the caCORE LexEVS server. Access to the DLB API requires access to the lexevsapi-client.jar file, available for download on the NCICB Web site. The lexevsapi-client.jar file needs to be available in the classpath.
<h3 id="id-5LexEVS5.xcaCOREDataServiceAPI-ExampleUsingtheDLBAPI">
  Example Using the DLB API
</h3>
The following code sample shows use of the DLB API to retrieve the list of available coding schemes in the LexEVS repository.


import org.LexGrid.LexBIG.LexBIGService.LexBIGService;
import org.LexGrid.LexBIG.Utility.Constructors;
import org.LexGrid.LexBIG.caCore.interfaces.LexEVSApplicationService;
import org.LexGrid.codingSchemes.CodingScheme;

import gov.nih.nci.system.client.ApplicationServiceProvider;

public class Test {

LexBIGService lbSvc;

public void run(String codingScheme, String version) {
// Set the LexEVS URL (for remote access)
String evsUrl = &#34;https://lexevsapi65.nci.nih.gov/lexevsapi65&#34;;

// Get the LexBIG service reference from LexEVS Application Service
try {
lbSvc = (LexEVSApplicationService) ApplicationServiceProvider.getApplicationServiceFromUrl(evsUrl,
&#34;EvsServiceInfo&#34;);
} catch (Exception e1) {
e1.printStackTrace();
}
// Resolve Scheme
try {
CodingScheme scheme = lbSvc.resolveCodingScheme(codingScheme,
Constructors.createCodingSchemeVersionOrTagFromVersion(version));
if(scheme != null) {
System.out.println(&#34;Found scheme: &#34; + scheme.getCodingSchemeName());
}else {
System.out.println(&#34;Scheme not found: &#34; + codingScheme);
}
} catch (Exception e) {
e.printStackTrace();
}

}

/**
* Main
*/
public static void main(String[] args) {
String name = &#34;NCI Thesaurus&#34;;
String version = &#34;18.03d&#34;;

new Test().run(name, version);
}
} 