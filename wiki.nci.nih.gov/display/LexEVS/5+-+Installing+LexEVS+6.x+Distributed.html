Contents of this Page
<ul>
  <li>
    <a href="#id-5InstallingLexEVS6.xDistributed-Introduction" rel="nofollow">
      Introduction
    </a>
    <ul>
      <li>
        <a href="#id-5InstallingLexEVS6.xDistributed-PreliminaryConsiderations" rel="nofollow">
          Preliminary Considerations
        </a>
      </li>
      <li>
        <a href="#id-5InstallingLexEVS6.xDistributed-DownloadingandInstallingLexEVSDistributed" rel="nofollow">
          Downloading and Installing LexEVS Distributed
        </a>
      </li>
      <li>
        <a href="#id-5InstallingLexEVS6.xDistributed-TestingLexEVSDistributed" rel="nofollow">
          Testing LexEVS Distributed
        </a>
      </li>
    </ul>
  </li>
  <li>
    <a href="#id-5InstallingLexEVS6.xDistributed-Troubleshooting" rel="nofollow">
      Troubleshooting
    </a>
  </li>
</ul>
<table>
  <colgroup>
    <col/>
  </colgroup>
  <tbody>
    <tr>
      <th>
        LexEVS 6.x Installation Links
      </th>
    </tr>
    <tr>
      <td>
        <ul>
          <li>
            <a href="https://wiki.nci.nih.gov/pages/viewpage.action?pageId=62427361" rel="nofollow">
              Install Guide Main Page
            </a>
            <ul>
              <li>
                <a href="https://wiki.nci.nih.gov/pages/viewpage.action?pageId=62427338" rel="nofollow">
                  Overview
                </a>
              </li>
              <li>
                <a href="https://wiki.nci.nih.gov/pages/viewpage.action?pageId=62427336" rel="nofollow">
                  Prerequisites and Platforms
                </a>
              </li>
              <li>
                <a href="https://wiki.nci.nih.gov/pages/viewpage.action?pageId=62427547" rel="nofollow">
                  Local Runtime
                </a>
              </li>
              <li>
                <a href="https://wiki.nci.nih.gov/pages/viewpage.action?pageId=62427333" rel="nofollow">
                  Local Runtime Command Line
                </a>
              </li>
              <li>
                <a href="https://wiki.nci.nih.gov/pages/viewpage.action?pageId=62427330" rel="nofollow">
                  Distributed
                </a>
              </li>
              <li>
                <a href="https://wiki.nci.nih.gov/pages/viewpage.action?pageId=159778666" rel="nofollow">
                  CTS2 Services
                </a>
              </li>
              <li>
                <a href="https://wiki.nci.nih.gov/pages/viewpage.action?pageId=159778668" rel="nofollow">
                  URI Resolver Service
                </a>
              </li>
            </ul>
          </li>
          <li>
            <a href="https://wiki.nci.nih.gov/pages/viewpage.action?pageId=69730353" rel="nofollow">
              LexEVS 6.0 Main Page
            </a>
          </li>
          <li>
            <a href="https://wiki.nci.nih.gov/pages/viewpage.action?pageId=62427448" rel="nofollow">
              LexEVS Current Release
            </a>
          </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>
<h2 id="id-5InstallingLexEVS6.xDistributed-Introduction">
  Introduction
</h2>
The remote method invocation service of LexEVS (Distributed LexEVS) is being sunsetted.  NIH/NCI no longer hosts this externally.  If you choose to install this for your own service be aware that it will be deprecated in the near future.  This section provides requirements, instructions, and troubleshooting information for installing the LexEVS Distributed environment.
<h3 id="id-5InstallingLexEVS6.xDistributed-PreliminaryConsiderations">
  Preliminary Considerations
</h3>
<ul>
  <li>
    The
    <a href="https://wiki.nci.nih.gov/pages/viewpage.action?pageId=62427339" rel="nofollow">
      Supported Platforms
    </a>
    are the same for this environment as they are for the Local Runtime.
  </li>
  <li>
    Before installing the LexEVS Distributed environment you must have a
    <a href="https://wiki.nci.nih.gov/pages/viewpage.action?pageId=62427547" rel="nofollow">
      LexEVS Local Runtime
    </a>
    installed and working.
  </li>
  <li>
    It is not required that you load a terminology into the Local Runtime in order to complete the installation of the Distributed environment. However, using the APIs in the Distributed environment requires that a terminology be loaded into the Local Runtime.
  </li>
  <li>
    The Distributed environment has additional
    <a href="https://wiki.nci.nih.gov/pages/viewpage.action?pageId=62427337" rel="nofollow">
      Prerequisite software
    </a>
    beyond the Local Runtime. The additional web application server does not have install steps given in this guide. The web application server can be on the same server or a different server from the Local Runtime.
  </li>
  <li>
    Complete the
    <a href="https://wiki.nci.nih.gov/pages/viewpage.action?pageId=62427330" rel="nofollow">
      #Downloading and Installing LexEVS Distributed
    </a>
    steps below.
  </li>
</ul>
Once you have completed the additional prerequisite software install, the Distributed environment install steps, and the verification test as described in this guide then you should be ready to start using the Distributed features to meet the needs of your application. Not counting prerequisite software products the installation and verification should not take more than 30 minutes.
<h3 id="id-5InstallingLexEVS6.xDistributed-DownloadingandInstallingLexEVSDistributed">
  Downloading and Installing LexEVS Distributed
</h3>
<table>
  <colgroup>
    <col/>
    <col/>
  </colgroup>
  <tbody>
    <tr>
      <th>
        Step
      </th>
      <th>
        Action
      </th>
    </tr>
    <tr>
      <td>
        1. Download the latest version of the LexEVS Distributed WAR file from the right. You have a choice between WAR files tailored for JBoss or Apache Tomcat installations. The location you have chosen to save this on your computer will be referred to as the SAVE_DIRECTORY. Our command examples will use scratch as this directory.NoteAccess to the downloads does not require an account. If you are having trouble downloading files then you may need to disable pop-up blockers or check any firewall settings at your site.
      </td>
      <td>
        LexEVS Distributed Includes the Java runtime and dependencies, the Java distributed API, and the caCORE SDK-generated services. This can be deployed to an Apache Tomcat or JBoss container.
        <a href="https://cbiit-download.nci.nih.gov/evs/LexEVS/v6.0/Release/lexevsapi60.tomcat.war" rel="nofollow">
          lexevsapi60.tomcat.war
        </a>
        ,
        <a href="https://cbiit-download.nci.nih.gov/evs/LexEVS/v6.0/Release/lexevsapi60.jboss.war" rel="nofollow">
          lexevsapi60.jboss.war
        </a>
      </td>
    </tr>
    <tr>
      <td>
        2. Shut down your application or servlet container. This presumes that you have already installed a web server as outlined in the
        <a href="https://wiki.nci.nih.gov/pages/viewpage.action?pageId=62427337" rel="nofollow">
          LexEVS 6.x Prerequisite Software Supported to Include
        </a>
        . The command to do the shut down will be web server specific. See the documentation for your web server for information on how to do this. There may be many alternatives.JBoss example:
        <ul>
          <li>
            Windows:
            shutdown.bat -S
          </li>
          <li>
            Unix:
            ./shutdown.sh -S

            If you experience Java errors then the server may already be down.
          </li>
        </ul>
      </td>
      <td>
        <img alt="Shutting down the JBoss server." src="https://wiki.nci.nih.gov/download/attachments/embedded-page/LexEVS/5%20-%20Installing%20LexEVS%206.x%20Distributed/Jboss_shutdown.PNG?api=v2">
      </td>
    </tr>
    <tr>
      <td>
        3. Rename the WAR file. These files are distributed with an application server designation in their name for clarity while downloading them. Change to the SAVE_DIRECTORY and rename the file, like this:
        rename {SAVE_DIRECTORY}/lexevsapi6.5.{WEB_SERVER}.war {SAVE_DIRECTORY}/lexevsapi65.war

        JBoss example:
        <ul>
          <li>
            Windows:
            rename c:\scratch\lexevsapi65.jboss.war lexevsapi65.war
          </li>
          <li>
            Unix:
            move /scratch/lexevsapi65.jboss.war lexevsapi65.war

            NoteConsider other names as well. Many application servers use the deployed name as part of the URL, so if you would rather it be a different name then you should rename the WAR file to that.
          </li>
        </ul>
      </td>
      <td>
        <img alt="Command prompt showing rename of the WAR file." src="https://wiki.nci.nih.gov/download/attachments/embedded-page/LexEVS/5%20-%20Installing%20LexEVS%206.x%20Distributed/Jboss_rename.PNG?api=v2">
      </td>
    </tr>
    <tr>
      <td>
        4. Copy the WAR file to the appropriate web application server directory, like this:
        copy {SAVE_DIRECTORY}\lexevsapi65.war {WEB_SERVER_HOME}\{DEPLOYMENT_HOME}

        ...where SAVE_DIRECTORY is the location of the downloaded file.WEB_SERVER is the brand of the web server.WEB_SERVER_HOME is your application server home directory.DEPLOYMENT_HOME is the Web Archive deployment directory for your application server.JBoss example:
        <ul>
          <li>
            Windows:
            copy c:\scratch\lexevsapi65.war c:\jboss-5.1.0.GA\server\default\deploy

            Unix:
            copy /scratch/lexevsapi65.war /jboss-4.0.5.GA/server/default/deploy
          </li>
        </ul>
      </td>
      <td>
        <img alt="Copy the WAR file to the JBoss deploy directory." src="https://wiki.nci.nih.gov/download/attachments/embedded-page/LexEVS/5%20-%20Installing%20LexEVS%206.x%20Distributed/Copy_evs_war.PNG?api=v2">
      </td>
    </tr>
    <tr>
      <td>
        5. Create a text file named lexevs.properties in the WEB_SERVER_CLASSPATH to set the location of the LexEVS configuration. The WEB_SERVER_CLASSPATH is a location along the class path for your web application server. This whole path including the file name will be called LEXEVS_PROPERTIES_HOME for the rest of these instructions.
        <ul>
          <li>
            JBoss example:
            <ul>
              <li>
                Windows:
                c:\jboss-5.1.0.GA\server\default\conf\lexevs.properties
              </li>
              <li>
                Unix:
                /jboss-5.1.0.GA/server/default/conf/lexevs.properties
              </li>
            </ul>
          </li>
          <li>
            Set LG_CONFIG_FILE to the path of the lbconfig.propsfile of your LexEVS installation like this:
            LG_CONFIG_FILE={LEXEVS_HOME}\resources\config\lbconfig.props

            ...where LexEVS_HOME is the install directory of LexVES.
          </li>
          <li>
            Copy/paste the examples below as a starting point for this file:
            <ul>
              <li>
                Windows:
                LG_CONFIG_FILE=c:\\LexEVS\\6.5\\resources\\config\\lbconfig.props

                Notehe back slash escape character required for a Windows, Java environment.
              </li>
              <li>
                Unix:
                LG_CONFIG_FILE=/LexEVS/6.5/resources/config/lbconfig.props
              </li>
            </ul>
          </li>
        </ul>
      </td>
      <td>
        <img alt="Editing the LexEVS properties file." src="https://wiki.nci.nih.gov/download/attachments/embedded-page/LexEVS/5%20-%20Installing%20LexEVS%206.x%20Distributed/Create_lexevs_properties.PNG?api=v2">
      </td>
    </tr>
    <tr>
      <td>
        6. (OPTIONAL) The lexevs.properties file is also used to add security for any coding scheme. This is not a highly used function, but may be required if your service is publicly hosting a proprietary terminology. For each coding scheme a security implementation class name can be set to enable security like this:
        {CODING_SCHEME_NAME}={SECURITY_IMPLEMENTATION}

        ...where CODING_SCHEME_NAME is the name or URI of the terminology.SECURITY_IMPLEMENTATION is a class that implements the interface gov.nih.nci.system.dao.security.DAOSecurity.For all ways of accessing the coding scheme, security must be set up. The example at the right shows access by Name, URI, and Formal Name, but others are possible too.Note:Coding schemes can be added or changed later after a coding scheme or terminology is loaded into LexEVS.
      </td>
      <td>
        MedDRA=gov.nih.nci.system.dao.security.MedDRASecurity
        urn\:oid\:2\.16\.840\.1\.113883\.6\.163=gov.nih.nci.system.dao.security.MedDRASecurity
        Medical\ Dictionary\ for\ Regulatory\ Activities\ Terminology\ \(MedDRA\)=gov.nih.nci.system.dao.security.MedDRASecurity
      </td>
    </tr>
    <tr>
      <td>
        7. Adjust the properties-service.xml file.This file is likely to be found in the WEB_SERVER_HOME DEPLOYMENT_HOME directory but may be different for some servers.
        <ul>
          <li>
            JBoss example:
            <ul>
              <li>
                Windows:
                c:\jboss-5.1.0.GA\server\default\deploy\properties-service.xml
              </li>
              <li>
                Unix:
                /jboss-5.1.0.GA/server/default/deploy/properties-service.xml
              </li>
            </ul>
          </li>
          <li>
            Add a line to the file in the &#34;System Properties Service&#34; section where other properties are set like this:
            &lt;attribute name=&#34;Properties&#34;&gt;org.LexGrid.LexBIG.caCore.Properties={LEXEVS_PROPERTIES_HOME}&lt;/attribute&gt;

            ...where LEXEVS_PROPERTIES_HOME is the location and file name of lexevs.properties established in a previous step.
          </li>
          <li>
            In Tomcat place the file in the /webapps/lexevsapi65/WEB-INF/classes directory. Edit the catalina.sh file in &lt;tomcat root&gt;/bin/ adding to the JAVA_OPTS -Xmx1052m -XX:MaxPermSize=256m&#34; ...so that this line in catalina.sh::
            JAVA_OPTS=&#34;$JAVA_OPTS \-Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager&#34;

            Should look like this:
            JAVA_OPTS=&#34;$JAVA_OPTS \-Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager \-Xmx1052m \-XX:MaxPermSize=256m&#34;
          </li>
          <li>
            JBoss example:
            &lt;attribute name=&#34;Properties&#34;&gt;
            org.LexGrid.LexBIG.caCore.Properties={LEXEVS_PROPERTIES_HOME}
            &lt;/attribute&gt;

            ...is added to this file between the &lt;mbean&gt; tags.The back slash escape character is NOT required for LEXEVS_PROPERTIES_HOME.NoteIn some server installations you may not have authority to modify this file. In that case you can simply move thelexevs.propertiesfile somewhere on the web application servers class path.
          </li>
        </ul>
      </td>
      <td>
        <img alt="Wordpad editing the Jbos Service PROPERTIES file." src="https://wiki.nci.nih.gov/download/attachments/embedded-page/LexEVS/5%20-%20Installing%20LexEVS%206.x%20Distributed/Jboss_properties_service.PNG?api=v2">
      </td>
    </tr>
  </tbody>
</table>
<h3 id="id-5InstallingLexEVS6.xDistributed-TestingLexEVSDistributed">
  Testing LexEVS Distributed
</h3>
<table>
  <colgroup>
    <col/>
    <col/>
  </colgroup>
  <tbody>
    <tr>
      <th>
        Step
      </th>
      <th>
        Action
      </th>
    </tr>
    <tr>
      <td>
        1. Start your application or servlet container if it is not already started. The start command will be web server specific. See the documentation for your web server for information on how to do this.JBoss example:
        <ul>
          <li>
            Windows:
            Run.bat \-c default
          </li>
          <li>
            Unix:
            ./Run.sh \-c default
          </li>
        </ul>
      </td>
      <td>
        <img alt="Starting the JBoss server." src="https://wiki.nci.nih.gov/download/attachments/embedded-page/LexEVS/5%20-%20Installing%20LexEVS%206.x%20Distributed/Jboss_start.PNG?api=v2">
      </td>
    </tr>
    <tr>
      <td>
        2. Verify the installation by opening a browser to:
        http://{SERVER_ADDRESS}/{WAR_FILE_DEPLOYED}

        ...where SERVER_ADDRESS is the address of your server (domain and optionally the port number).WAR_FILE_DEPLOYED is the name of the WAR file you placed in the server directories for deployment.For example:
        http://localhost:8080/lexevsapi65
        If you are using localhost then your browser must be running on the same server as LexEVS.
      </td>
      <td>
        <img alt="Default web page after successful start of LexEVS Distributed." src="https://wiki.nci.nih.gov/download/attachments/embedded-page/LexEVS/5%20-%20Installing%20LexEVS%206.x%20Distributed/EVS_Home.PNG?api=v2">
      </td>
    </tr>
  </tbody>
</table>
If you see the Enterprise Vocabulary Services &#34;Welcome to LexEVS&#34; web page then you have successfully installed the LexEVS Distributed. Congratulations!
<h2 id="id-5InstallingLexEVS6.xDistributed-Troubleshooting">
  Troubleshooting
</h2>
<ul>
  <li>
    If the Local Runtime environment is properly installed and tested then the Distributed environment should have few problems.
  </li>
  <li>
    If you receive deployment errors in JBoss and are unable to see the EVS home page then you may not have configured the properties attribute in JBoss&#39;s properties-service.xml.
  </li>
  <li>
    You may also need to adjust the path in lexevs.properties where lbconfig.props location is defined.
  </li>
  <li>
    We recommend no threading limits less than 512mb being applied when starting JBoss. (These would usually be configured as a JAVA_OPTS variable in a run.conf or similar file and would be set as follows: -Xss512M )
  </li>
  <li>
    We recommend a minimum heap size of -Xmx750m when starting JBoss and about 1000m per million entities loaded. (Also a JAVA_OPTS variable)
  </li>
  <li>
    We recommend a minimum Perm Gen size of 256m.
  </li>
</ul>