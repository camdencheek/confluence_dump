Contents of this Page
<ul>
  <li>
    <a href="#LexWiki1.1InstallationGuide-Introduction" rel="nofollow">
      Introduction
    </a>
  </li>
  <li>
    <a href="#LexWiki1.1InstallationGuide-Scope" rel="nofollow">
      Scope
    </a>
  </li>
  <li>
    <a href="#LexWiki1.1InstallationGuide-Prerequisites" rel="nofollow">
      Prerequisites
    </a>
  </li>
  <li>
    <a href="#LexWiki1.1InstallationGuide-Tips" rel="nofollow">
      Tips
    </a>
  </li>
  <li>
    <a href="#LexWiki1.1InstallationGuide-Pre-Installation" rel="nofollow">
      Pre-Installation
    </a>
  </li>
  <li>
    <a href="#LexWiki1.1InstallationGuide-Installation" rel="nofollow">
      Installation
    </a>
  </li>
  <li>
    <a href="#LexWiki1.1InstallationGuide-Post-Installation" rel="nofollow">
      Post-Installation
    </a>
  </li>
  <li>
    <a href="#LexWiki1.1InstallationGuide-Installingonlycertainextensions" rel="nofollow">
      Installing only certain extensions
    </a>
  </li>
  <li>
    <a href="#LexWiki1.1InstallationGuide-Troubleshooting" rel="nofollow">
      Troubleshooting
    </a>
    <ul>
      <li>
        <a href="#LexWiki1.1InstallationGuide-Mediawikialreadyexists" rel="nofollow">
          Media wiki already exists
        </a>
      </li>
      <li>
        <a href="#LexWiki1.1InstallationGuide-Webserverisnotrunning." rel="nofollow">
          Web server is not running.
        </a>
      </li>
      <li>
        <a href="#LexWiki1.1InstallationGuide-com.mysql.jdbc.CommunicationsException:Communicationslinkfailure" rel="nofollow">
          com.mysql.jdbc.CommunicationsException: Communications link failure
        </a>
      </li>
      <li>
        <a href="#LexWiki1.1InstallationGuide-Can&#39;tconnecttolocalMySQLserverthroughsocket..." rel="nofollow">
          Can&#39;t connect to local MySQL server through socket...
        </a>
      </li>
      <li>
        <a href="#LexWiki1.1InstallationGuide-Warningmessagesduringinstallationandonthemainpage" rel="nofollow">
          Warning messages during installation and on the main page
        </a>
      </li>
    </ul>
  </li>
</ul>
<table>
  <tbody>
    <tr>
      <th>
        LexWiki Links
      </th>
    </tr>
    <tr>
      <td>
        <ul>
          <li>
            <a href="https://wiki.nci.nih.gov/pages/viewpage.action?pageId=63242265" rel="nofollow">
              LexWiki Main
            </a>
          </li>
          <li>
            <a href="https://wiki.nci.nih.gov/pages/viewpage.action?pageId=63242269" rel="nofollow">
              Documentation
            </a>
          </li>
          <li>
            <a href="https://wiki.nci.nih.gov/pages/viewpage.action?pageId=63242249" rel="nofollow">
              Presentations
            </a>
          </li>
          <li>
            <a href="https://wiki.nci.nih.gov/pages/viewpage.action?pageId=63242258" rel="nofollow">
              Roadmap
            </a>
          </li>
          <li>
            <a href="https://wiki.nci.nih.gov/pages/viewpage.action?pageId=63242263" rel="nofollow">
              Publisher
            </a>
          </li>
          <li>
            <a href="https://wiki.nci.nih.gov/pages/viewpage.action?pageId=63996221" rel="nofollow">
              Tool Adopters
            </a>
          </li>
        </ul>
      </td>
    </tr>
  </tbody>
</table>
An PDF version of this guide is
<a href="https://wiki.nci.nih.gov/download/attachments/63242250/LexWiki_1.1_Installation_Guide.pdf?version=1&amp;modificationDate=1320410330000&amp;api=v2" rel="nofollow">
  attached to this page
</a>
.
<h2 id="LexWiki1.1InstallationGuide-Introduction">
  Introduction
</h2>
LexWiki is an open source, high-capacity editor for distributed terminology development. Developed by Mayo Clinic with collaboration by the National Cancer Institute (NCI), the World Health Organization (WHO) and Stanford University, it is a synergistic effort for the development of a collaborative terminology authoring platform based on the integration of LexGrid and Semantic MediaWiki technologies. This version of LexWiki does not include Protégé components.

The features of LexWiki include:
<ul>
  <li>
    Browsing support
    <ul>
      <li>
        Hierarchy view with Category Tree extension
      </li>
      <li>
        Concept-oriented view with Header tabs extension
      </li>
      <li>
        Proposal browsing - all proposals listed by curation status and by categories with ontology browser
      </li>
    </ul>
  </li>
  <li>
    My Proposals has a workflow extension
  </li>
  <li>
    Authoring support
    <ul>
      <li>
        The LexWiki Protege Tab is used for loading contents into Wiki.
      </li>
      <li>
        LexWiki Editor - semantic forms/Header Tabs: may propose change, new concept or concept removal
      </li>
      <li>
        Change tracking and view changes
      </li>
      <li>
        Proposal Commenting
      </li>
      <li>
        Proposal Voting
      </li>
      <li>
        Evidence attachment with citation and file upload
      </li>
    </ul>
  </li>
</ul>
<h2 id="LexWiki1.1InstallationGuide-Scope">
  Scope
</h2>
The LexWiki Installation Guide is intended for administrators. This guide will give you an overview of how to install and configure a LexWiki system. If you are not an administrator, we recommend that you work with the system administrator of your organization to install and configure LexWiki.
<h2 id="LexWiki1.1InstallationGuide-Prerequisites">
  Prerequisites
</h2>
Unknown macro: {multi-excerpt-include}
<h2 id="LexWiki1.1InstallationGuide-Tips">
  Tips
</h2>
The installer utilizes Ant to perform its tasks.
<ol>
  <li>
    To find out information about various targets enter &#34;ant usage&#34; in the command prompt.
  </li>
  <li>
    To find out information about your MediaWiki install, enter &#34;ant info&#34; in the command prompt.
  </li>
  <li>
    To find information about the various extensions and their versions which will be installed, enter &#34;ant info-ext&#34; in the command prompt.
  </li>
</ol>
<h2 id="LexWiki1.1InstallationGuide-Pre-Installation">
  Pre-Installation
</h2>
LexWiki is built on MediaWiki 1.11.1, and therefore has the same basic set of requirements: PHP 5, MySQL 5, and a Web server. We have tested only with Apache 2.2. You should understand how to work with the Web server that you are using. You need permissions to run the Web server and write to its document root directories. On Linux or Mac OSX, you will usually need one of the following:
<ul>
  <li>
    root access
  </li>
  <li>
    apache account access (i.e. you can log in as apache, the account that runs the Apache server process)
  </li>
  <li>
    apache group access (i.e. your account is a member of the same group as the apache account)
  </li>
  <li>
    sudo privileges
  </li>
</ul>
The installation script is written in Ant, so you will need Java and Ant installed and configured correctly. Refer to the
<a href="http://ant.apache.org/manual/index.html" rel="nofollow">
  Ant
</a>
docs for more information.

You also need to have a running MySQL sever and appropriate database privileges. If you have root access to your MySQL database server, the installation script will set up the necessary database and user account. Otherwise, you&#39;ll need to create a database for the wiki and create/configure an account that has all privileges on that database. That account must also have the SELECT privilege on mysql.func table.
<h2 id="LexWiki1.1InstallationGuide-Installation">
  Installation
</h2>
<ol>
  <li>
    Backup any existing MediaWiki installation. This installation process will not upgrade an existing MediaWiki folder.
  </li>
  <li>
    Delete any existing MediaWiki install folder after backup.
  </li>
  <li>
    Unzip lexwiki-installer.zip to a temporary directory.
  </li>
  <li>
    In the lexwiki-installer directory, edit the lexwiki.properties file to reflect values of your host, port etc. Refer to the comments in that file for detailed directions. If the user has database administrator privileges, set the wikidb.adminuser and wikidb.adminpassword in the lexwiki.properties file. Also be sure to set the has.root property to true. If the user does not have database administrator privileges, create a new database for your wiki and configure the user privileges as described above. Enter all details in the lexwiki.properties file and make sure to set the has.root property to &#39;false&#39; in lexwiki.properties.
  </li>
  <li>
    On the command prompt, type ant install and hit Enter. Note: You need to run this with an account that has appropriate privileges on the Web server&#39;s document root directory. So, if you have only sudo privileges, you&#39;d need to run sudo ant install.
  </li>
  <li>
    The installer will show a BUILD SUCCESSFUL message as displayed below.


    install:
    [echo]
    [echo] Mediawiki was successfully installed\!
    [echo] Please access mediawiki at http:/localhost:80/w/mediawiki/index.php/Main_page
    [echo] You can log in to mediawiki with username/password:WikiSysop/wikisysop 123.
    [echo] The installation log is available at:/Users/joshusa/packages/lexwiki/temp/lexwiki-installer/lexwiki-installer-log.txt
    [echo]
    BUILD SUCCESSFUL
    Total time: 2 minutes 32 seconds
    james-2: lexwiki-installer joshua$
  </li>
</ol>
<h2 id="LexWiki1.1InstallationGuide-Post-Installation">
  Post-Installation
</h2>
The URL where MediaWiki is available will be displayed on the command prompt. Navigate to that URL in your browser and you should see the following page.
<img alt="screenshot of main page of successful installation" src="https://wiki.nci.nih.gov/download/attachments/embedded-page/LexWiki/LexWiki%201.1%20Installation%20Guide/Install_success_main_page.jpg?api=v2">
You can log in to your LexWiki as an administrator using the username and password displayed on the command prompt. Congratulations! The LexWiki installation is complete and ready to be used!
<h2 id="LexWiki1.1InstallationGuide-Installingonlycertainextensions">
  Installing only certain extensions
</h2>
The installer is capable of installing specified extensions. Open the file module-metadata.txt from the directory in which you unzipped lexwiki-installer.zip. By default all the modules (and their versions) are mentioned here. To add or remove a module, simply edit the relevant line in the file. Make sure to follow the syntax exactly as shown in module-metadata.txt. The syntax in the file is sensitive to the following:
<ul>
  <li>
    Every module descriptor starts on a new line.
  </li>
  <li>
    There are no spaces in the module descriptor.
  </li>
  <li>
    Every module descriptor ends with a semi-colon.
  </li>
  <li>
    Any line that starts with a &#39;#&#39; will be treated as a comment and ignored.
  </li>
</ul>
<h2 id="LexWiki1.1InstallationGuide-Troubleshooting">
  Troubleshooting
</h2>
The following is a list of common issues and their solutions.
<h3 id="LexWiki1.1InstallationGuide-Mediawikialreadyexists">
  Media wiki already exists
</h3>
If you see the following console output:



BUILD FAILED
/Users/joshua/packages/lexwiki/temp/lexwiki-installer/build.xml:377: Media wiki already exists.
Please back up your mediawiki install and delete this folder for installation to proceed.
The existing mediawiki folder was found at: /Library/WebServer/Documents/w/mediawiki



you need to delete your existing MediaWiki instance before installing.
<h3 id="LexWiki1.1InstallationGuide-Webserverisnotrunning.">
  Web server is not running.
</h3>
If you see this output:



check-apache:
[echo] Checking for web server at http://localhost:8080

BUILD FAILED
/Users/joshua/packages/lexwiki/temp/lexwiki-installer/build.xml:329: Web server is not running.



check that the Web server is up and that you have specified the correct value for the port property in lexwiki.properties.
<h3 id="LexWiki1.1InstallationGuide-com.mysql.jdbc.CommunicationsException:Communicationslinkfailure">
  com.mysql.jdbc.CommunicationsException: Communications link failure
</h3>
If you see the following error message on the console:



[echo] ------------- ----------- ----------
[trycatch] Caught exception: com.mysql.jdbc.CommunicationException: Communications link failure
[trycatch]
[trycatch]Last packet sent to the server was 0 ms ago
[echo] Error connecting to DB
[echo] Exception Trace:
[echo] com.mysql.jdbc.CommunicationsException: Communicatons link failure
[echo]
[echo]Last packet sent to the server was 0 ms ago.




check that your database is running.
<h3 id="LexWiki1.1InstallationGuide-Can&#39;tconnecttolocalMySQLserverthroughsocket...">
  Can&#39;t connect to local MySQL server through socket...
</h3>
If you see a BUILD FAILED message and the console displays the following:

fig/index-forAnt.php(518): eval ()&#39;d code on line 49
[exec] Database type: MySQL
[exec] Loading class: DatabaseMYsql
[exec] Using root --&gt;
[exec] Attempting to connect to database server as wikiuser...failed with error[ 2002] Can&#39;t connect to local MySQL server through socket &#39;/var/msql/mysql.com&#39;(2)

BUILD FAILED
/Users/joshua/packages/lexwiki/temp/lexwiki-install/build.xml:402: Lexwiki installation failure.

	Did not find file:/Library/WebServer/Documents/w/mediawiki/config/LocalSettings.php



then specify the IP address of your database server for the value of the datasource.host property in lexwiki.properties.
<h3 id="LexWiki1.1InstallationGuide-Warningmessagesduringinstallationandonthemainpage">
  Warning messages during installation and on the main page
</h3>
If you are seeing lots of warning messages on the console during installation and then on the main page after successful installation, this is because you have set the PHP logging level too high. Refer to the PHP documentation to reduce the logging level. 